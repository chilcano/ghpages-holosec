<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Install Liferay 6.0.5 CE WAR on Tomcat 6.0.29 and MySQL as non root webapp and without Tomcat Manager | Holistic Security</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Install Liferay 6.0.5 CE WAR on Tomcat 6.0.29 and MySQL as non root webapp and without Tomcat Manager" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We will explain how to install Liferay 6.0.5 CE WAR bundle in an existing Apache Tomcat 6.0.29 and MySQL Server as non ROOT webapp and without Tomcat Manager." />
<meta property="og:description" content="We will explain how to install Liferay 6.0.5 CE WAR bundle in an existing Apache Tomcat 6.0.29 and MySQL Server as non ROOT webapp and without Tomcat Manager." />
<link rel="canonical" href="https://holisticsecurity.io/2010/08/30/install-liferay-605-war-tomcat-6029-mysql-nonroot-manager/" />
<meta property="og:url" content="https://holisticsecurity.io/2010/08/30/install-liferay-605-war-tomcat-6029-mysql-nonroot-manager/" />
<meta property="og:site_name" content="Holistic Security" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2010-08-30T17:24:49+02:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://holisticsecurity.io/2010/08/30/install-liferay-605-war-tomcat-6029-mysql-nonroot-manager/"},"url":"https://holisticsecurity.io/2010/08/30/install-liferay-605-war-tomcat-6029-mysql-nonroot-manager/","headline":"Install Liferay 6.0.5 CE WAR on Tomcat 6.0.29 and MySQL as non root webapp and without Tomcat Manager","dateModified":"2010-08-30T17:24:49+02:00","datePublished":"2010-08-30T17:24:49+02:00","description":"We will explain how to install Liferay 6.0.5 CE WAR bundle in an existing Apache Tomcat 6.0.29 and MySQL Server as non ROOT webapp and without Tomcat Manager.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://holisticsecurity.io/feed.xml" title="Holistic Security" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-156433649-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/"><img src="/assets/img/logo-holosec.png" width="100" /> Holistic Security</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Home</a><a class="page-link" href="/blog/">Blog</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Install Liferay 6.0.5 CE WAR on Tomcat 6.0.29 and MySQL as non root webapp and without Tomcat Manager</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2010-08-30T17:24:49+02:00" itemprop="datePublished">Aug 30, 2010 
      </time>&sim; OPEN SOURCE Â· PORTAL
      &sim; LIFERAY
    </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>We will explain how to install Liferay 6.0.5 CE WAR bundle in an existing <code class="highlighter-rouge">Apache Tomcat 6.0.29</code> and <code class="highlighter-rouge">MySQL Server</code> as non <code class="highlighter-rouge">ROOT</code> webapp and without Tomcat Manager.</p>

<p><img src="/assets/blog20100830_liferay605war/liferay_601.png" alt="" /></p>

<!-- more -->

<h2 id="install-liferay-on-tomcat">Install Liferay on Tomcat</h2>

<p><img src="/assets/blog20100830_liferay605war/liferay605war_1login.png" alt="" /></p>

<ol>
  <li>Download and install <a href="http://apache.rediris.es//tomcat/tomcat-6/v6.0.29/bin/apache-tomcat-6.0.29-windows-x86.zip">Apache Tomcat 6.0.29</a> standard bundle (with Tomcat Manager included).</li>
  <li>Download <code class="highlighter-rouge">liferay-portal-6.0.5.war</code> and <code class="highlighter-rouge">liferay-portal-dependencies-6.0.5.zip</code>.</li>
  <li>Unzip <code class="highlighter-rouge">liferay-portal-6.0.5.war</code> file and copy all content into the new Tomcat Context, in this example will be <code class="highlighter-rouge">%TOMCAT_HOME%/webapps/liferay605</code> folder.</li>
  <li>Unzip and copy all dependencies to <del><code class="highlighter-rouge">%TOMCAT_HOME%/lib</code></del> <code class="highlighter-rouge">%TOMCAT_HOME%/lib/ext</code>.</li>
  <li>Download and copy <code class="highlighter-rouge">2</code> extra libraries ( <code class="highlighter-rouge">jta.jar</code> and <code class="highlighter-rouge">mail.jar</code> ) to <del><code class="highlighter-rouge">%TOMCAT_HOME%/lib</code></del> <code class="highlighter-rouge">%TOMCAT_HOME%/lib/ext</code>.</li>
  <li>Create <code class="highlighter-rouge">liferay605.xml</code> file into <code class="highlighter-rouge">%TOMCAT_HOME%/conf/Catalina/localhost</code> folder.<br />
  It looks like this:
    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;Context</span> <span class="na">path=</span><span class="s">""</span> <span class="na">crossContext=</span><span class="s">"true"</span><span class="nt">&gt;</span>  
 <span class="nt">&lt;Resource</span>  
     <span class="na">name=</span><span class="s">"jdbc/LiferayPool"</span>  
     <span class="na">auth=</span><span class="s">"Container"</span>  
     <span class="na">type=</span><span class="s">"javax.sql.DataSource"</span>  
     <span class="na">driverClassName=</span><span class="s">"com.mysql.jdbc.Driver"</span>  
     <span class="na">url=</span><span class="s">"jdbc:mysql://localhost:3306/lportal605_db?useUnicode=true&amp;characterEncoding=UTF-8"</span>  
     <span class="na">username=</span><span class="s">"root"</span>  
     <span class="na">password=</span><span class="s">""</span>  
     <span class="na">maxActive=</span><span class="s">"20"</span><span class="nt">/&gt;</span>  
 <span class="nt">&lt;/Context&gt;</span>  
</code></pre></div>    </div>
    <p>In my case, DB user is <code class="highlighter-rouge">root</code> with empty password. You must create an empty DB in MySQL before, for example <code class="highlighter-rouge">lportal605_db</code>.</p>
  </li>
  <li>Create <code class="highlighter-rouge">portal-ext.properties</code> into <code class="highlighter-rouge">%TOMCAT_HOME%/webapps/liferay605/WEB-INF/classes</code> folder. It looks like this:
    <pre><code class="language-txt">  jdbc.default.jndi.name=jdbc/LiferayPool  
  portal.ctx=/liferay605  
</code></pre>
  </li>
  <li>If you are using MySQL as database server instead of HSQL, you must copy <em>mysql jdbc lib</em> into <del><code class="highlighter-rouge">%TOMCAT_HOME%/lib</code></del> <code class="highlighter-rouge">%TOMCAT_HOME%/lib/ext</code> folder.</li>
  <li>Add the code below to <code class="highlighter-rouge">%TOMCAT_HOME%/lib/bin/startup.bat</code> or <code class="highlighter-rouge">startup.sh</code> :
    <pre><code class="language-txt">  set JAVA_OPTS=%JAVA_OPTS% -Xmx1024m -XX:MaxPermSize=256m
</code></pre>
  </li>
  <li>Run <code class="highlighter-rouge">startup.bat/sh</code>, you will see in console when liferay creates and populates the portal database automatically. Now, you can open browser window and enter the folow URL <code class="highlighter-rouge">http://localhost:8080/liferay605</code>. Use <code class="highlighter-rouge">test@liferay.com</code> and <code class="highlighter-rouge">test</code> as user and password respectively.</li>
</ol>

<h2 id="configure-tomcat-manager">Configure Tomcat Manager</h2>

<p>Sometimes you need to deploy liferay in your favorite hosting provider but It is impossible because you can not change files of root context, in this case you can use only control panel of you ISP o Tomcat Manager.
Tomcat Manager is included in standard Tomcat bundle but by default It is disabled. If you want to enable it, follow the next steps:</p>

<p><img src="/assets/blog20100830_liferay605war/liferay605war_2tomcatmanager.png" alt="" /></p>

<ol>
  <li>Edit <code class="highlighter-rouge">%TOMCAT_HOME%/conf/tomcat-users.xml</code></li>
  <li>Add user, for example:
    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>  
     <span class="nt">&lt;tomcat-users&gt;</span>  
     <span class="nt">&lt;role</span> <span class="na">rolename=</span><span class="s">"tomcat"</span><span class="nt">/&gt;</span>  
     <span class="nt">&lt;role</span> <span class="na">rolename=</span><span class="s">"manager"</span><span class="nt">/&gt;</span>  
     <span class="nt">&lt;user</span> <span class="na">username=</span><span class="s">"roger"</span> <span class="na">password=</span><span class="s">"roger"</span> <span class="na">roles=</span><span class="s">"tomcat,manager"</span><span class="nt">/&gt;</span>  
 <span class="nt">&lt;/tomcat-users&gt;</span>  
</code></pre></div>    </div>
  </li>
  <li>Run Tomcat and go to http://localhost:8080/manager</li>
  <li>Enter user and password configured in step 2.</li>
  <li>Log in to Liferay for example; in Tomcat Manager now you can see an opened session in liferay605 webapp context and to explore values stored in current session.<br />
  <img src="/assets/blog20100830_liferay605war/liferay605war_3tomcatmanagerliferay.png" alt="" /></li>
</ol>

<p>End.</p>

<p><strong>References</strong> :</p>
<ul>
  <li><a href="http://www.liferay.com/es/community/wiki/-/wiki/Main/Installing+5.2+SP3+WAR+on+Tomcat+6">Installing 5.2 SP3 WAR on Tomcat 6</a></li>
  <li><a href="http://holisticsecurity.wordpress.com/2010/07/19/execute-liferay-root-context">Execute Liferay Portal on non ROOT context</a></li>
</ul>

  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://holisticsecurity.io/2010/08/30/install-liferay-605-war-tomcat-6029-mysql-nonroot-manager/';
      this.page.identifier = 'https://holisticsecurity.io/2010/08/30/install-liferay-605-war-tomcat-6029-mysql-nonroot-manager/';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://holosec.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/2010/08/30/install-liferay-605-war-tomcat-6029-mysql-nonroot-manager/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><img src="/assets/img/logo-holosec.png" width="40" /> Holistic Security</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Holistic Security</li><li><a class="u-email" href="mailto:blog@holisticsecurity.io">blog@holisticsecurity.io</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Chilcano</span></a></li><li><a href="https://www.linkedin.com/in/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">Chilcano</span></a></li><li><a href="https://www.twitter.com/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">Chilcano</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Systems Thinking, Holism, Trust, Security &amp; Usability.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
