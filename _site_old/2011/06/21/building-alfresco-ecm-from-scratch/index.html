<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Building Alfresco ECM from scratch | Holistic Security</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Building Alfresco ECM from scratch" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This article show us how to build Alfresco from scratch which is useful when extending or bug fixing. [caption id=”” align=”aligncenter” width=”236” caption=”Alfresco ECM”][/caption] Requisites: 1. Windows XP 2. Java/JDK 1.6.0_21 (http://www.oracle.com/technetwork/java/javase/downloads/index.html) 3. Eclipse EE Helios SR2 (http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr2) 4. Subversion plugin for Eclipse (downloaded from Eclipse Marketplace) 5. Apache Tomcat 6.0.32 (http://tomcat.apache.org/download-60.cgi) 6. MySQL (XAMPP - http://www.apachefriends.org/en/xampp-windows.html) 7. ImageMagick ﻿6.7.0-Q16 (http://www.imagemagick.org/script/binary-releases.php#windows) 8. SWFTools 0.9.1 (http://www.swftools.org/download.html) 9. OpenOffice 3.2 (http://download.openoffice.org/index.html) 10. Alfresco source code downloaded from SVN on 15/June. [caption id=”” align=”alignnone” width=”493” caption=”Alfresco ECM: Community - version 4.0.0”][/caption] Setup development environment: JDK 1. Install JDK and set two system variables (JAVA_HOME and PATH): [sourcecode language=”text” gutter=”true” wraplines=”false”] JAVA_HOME=C:\1bpms-demo\jdk160_21 PATH=%PATH%;%JAVA_HOME%\bin [/sourcecode] Apache Tomcat 1. Install/Unzip Apache Tomcat in the folder above, for example, C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app 2. Create setenv.bat in C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin file with the following content: [sourcecode language=”text” gutter=”true” wraplines=”false”] set JAVA_OPTS=-Xms256m -Xmx1024m -Xss96k -XX:MaxPermSize=256m -server set JAVA_OPTS=%JAVA_OPTS% [/sourcecode] Eclipse 1. Unzip Eclipse into C:\1bpms-demo\eclipse-jee-helios-SR2. 2. Open Eclipse and install Subclipse plugin from Eclipse Marketplace. 3. Create a folder where will download and build the Alfresco source code, for example﻿ C:\1bpms-demo\alfresco_scratch. 4. Switch to “SVN Repository Exploring” perspective. Create a new SVN repository location, enter &lt;svn://svn.alfresco.com&gt; as the URL, then click on “alfresco” folder and do checkout as project in the workspace. 5. Configure ANT runtime in Eclipse. Go to Window &gt; Preferences &gt; Ant &gt; Runtime &gt; Properties and add 3 properties: [sourcecode language=”text” gutter=”true” wraplines=”false”] env.APP_TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app env.TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app env.VIRTUAL_TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_virtual [/sourcecode] In my case, env.VIRTUAL_TOMCAT_HOME is an empty folder. 5. Create an ANT project. - Select New &gt; Project in the Eclipse toolbar. Under “General” choose “Project”. - Right-click the project and choose New &gt; File - When the new file dialog box appears click the Advanced button and select “Link to file in the file system”. - Browse to the build.xml file located in the HEAD\root directory. MySQL, OpenOffice, SWFTools, ImageMagick and others 1. Install/Unzip MySQL (XAMPP) and create an empty database, for example: [sourcecode language=”text” gutter=”true” wraplines=”false”] create database alfresco; grant all on alfresco.* to alfresco@localhost identified by ‘alfresco’; grant all on alfresco.* to alfresco@localhost.localdomain identified by ‘alfresco’; [/sourcecode] 2. Install ImageMagick and SWFTools. Make sure you both exist in PATH system variable and you can run them from any place. 3. Install OpenOffice and make sure you can run it from any place. 4. Setup the Windows NetBios DLLs for CIFS Server: Copy Win32Utils.dll and Win32NetBIOS.dll placed in (C:\2workspace\alfresco20110615\HEAD\root\projects\alfresco-jlan\jni) to the env.TOMCAT_HOME/bin folder. Pre-configure Alfresco before building 1. Create the file alfresco-global.properties ﻿in C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\shared\classes with the following content: [sourcecode language=”text” gutter=”true” wraplines=”false”] dir.root=C:/1bpms-demo/alfresco_scratch/tomcat-6.0.32_app/alf_data web.application.context.url=http://127.0.0.1:8080/alfresco database connection properties db.driver=org.gjt.mm.mysql.Driver db.username=root db.password= db.name=alfresco db.url=jdbc:mysql://localhost/alfresco External executable locations ooo.exe=C:/1bpms-demo/openoffice-3.2/App/openoffice/program/soffice.exe ooo.enabled=false img.root=C:/1bpms-demo/ImageMagick-6.7.0-Q16 img.dyn=${img.root}/lib img.exe=${img.root}/convert swf.exe=C:/1bpms-demo/swftools0.9.1/pdf2swf.exe jodconverter.enabled=true jodconverter.officeHome=C:/1bpms-demo/openoffice-3.2/App/openoffice jodconverter.portNumbers=8101 [/sourcecode] 2. Copy mysql-connector-java-5.1.13-bin.jar to C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\lib 3. Modify shared.loader property of the catalina.properties file with following value: [sourcecode language=”text” gutter=”true” wraplines=”false”] shared.loader=${catalina.base}/shared/classes,${catalina.base}/shared/lib/*.jar [/sourcecode] Building: All targets for building Alfresco are within build.xml. You can use ant -projecthelp to see all the available options. Here are a few of the common commands: [sourcecode language=”text” gutter=”true” wraplines=”false”] ant build-tomcat builds and deploys Alfresco for Tomcat ant incremental-tomcat incrementally builds and deploys Alfresco for Tomcat ant start-tomcat-application executes the Tomcat start up script ant build-jboss builds and deploys Alfresco for JBoss ant incremental-jboss incrementally builds and deploys Alfresco for JBoss ant start-jboss executes the JBoss start up script ant test runs unit tests for the entire project [/sourcecode] 1. Run target “build-tomcat” from Eclipse. 2. Eclipse will create alfresco.war and share.war, they will be copied to webapps folder in Tomcat. 3. Now, Alfresco now is ready to be deployed. [caption id=”” align=”alignnone” width=”631” caption=”Alfresco ECM deployed from Eclipse”][/caption] Launch Tomcat/Alfresco 1. Run Tomcat from C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin\startup.bat. Make sure MySQL is running before. Alfresco database schema will be created and you will see all log of activity in the console. 2. If you want deploy/run alfresco from Eclipse: In Eclipse add a new server instance from “C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app”. Edit launch configuration properties of this server adding new VM arguments as: [sourcecode language=”text” gutter=”true” wraplines=”false”] -Dcatalina.base=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app” -Dcatalina.home=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app” -Dwtp.deploy=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\webapps” -Djava.endorsed.dirs=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\endorsed” -Xms256m -Xmx1024m -Xss96k -XX:MaxPermSize=256m -server -Djava.library.path=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin” [/sourcecode] Now, from Eclipse Server window run Tomcat instance. Test Alfresco Open a browser and go to http://localhost:8080/alfresco or http://localhost:8080/share and enter admin/admin as user/password. END." />
<meta property="og:description" content="This article show us how to build Alfresco from scratch which is useful when extending or bug fixing. [caption id=”” align=”aligncenter” width=”236” caption=”Alfresco ECM”][/caption] Requisites: 1. Windows XP 2. Java/JDK 1.6.0_21 (http://www.oracle.com/technetwork/java/javase/downloads/index.html) 3. Eclipse EE Helios SR2 (http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr2) 4. Subversion plugin for Eclipse (downloaded from Eclipse Marketplace) 5. Apache Tomcat 6.0.32 (http://tomcat.apache.org/download-60.cgi) 6. MySQL (XAMPP - http://www.apachefriends.org/en/xampp-windows.html) 7. ImageMagick ﻿6.7.0-Q16 (http://www.imagemagick.org/script/binary-releases.php#windows) 8. SWFTools 0.9.1 (http://www.swftools.org/download.html) 9. OpenOffice 3.2 (http://download.openoffice.org/index.html) 10. Alfresco source code downloaded from SVN on 15/June. [caption id=”” align=”alignnone” width=”493” caption=”Alfresco ECM: Community - version 4.0.0”][/caption] Setup development environment: JDK 1. Install JDK and set two system variables (JAVA_HOME and PATH): [sourcecode language=”text” gutter=”true” wraplines=”false”] JAVA_HOME=C:\1bpms-demo\jdk160_21 PATH=%PATH%;%JAVA_HOME%\bin [/sourcecode] Apache Tomcat 1. Install/Unzip Apache Tomcat in the folder above, for example, C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app 2. Create setenv.bat in C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin file with the following content: [sourcecode language=”text” gutter=”true” wraplines=”false”] set JAVA_OPTS=-Xms256m -Xmx1024m -Xss96k -XX:MaxPermSize=256m -server set JAVA_OPTS=%JAVA_OPTS% [/sourcecode] Eclipse 1. Unzip Eclipse into C:\1bpms-demo\eclipse-jee-helios-SR2. 2. Open Eclipse and install Subclipse plugin from Eclipse Marketplace. 3. Create a folder where will download and build the Alfresco source code, for example﻿ C:\1bpms-demo\alfresco_scratch. 4. Switch to “SVN Repository Exploring” perspective. Create a new SVN repository location, enter &lt;svn://svn.alfresco.com&gt; as the URL, then click on “alfresco” folder and do checkout as project in the workspace. 5. Configure ANT runtime in Eclipse. Go to Window &gt; Preferences &gt; Ant &gt; Runtime &gt; Properties and add 3 properties: [sourcecode language=”text” gutter=”true” wraplines=”false”] env.APP_TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app env.TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app env.VIRTUAL_TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_virtual [/sourcecode] In my case, env.VIRTUAL_TOMCAT_HOME is an empty folder. 5. Create an ANT project. - Select New &gt; Project in the Eclipse toolbar. Under “General” choose “Project”. - Right-click the project and choose New &gt; File - When the new file dialog box appears click the Advanced button and select “Link to file in the file system”. - Browse to the build.xml file located in the HEAD\root directory. MySQL, OpenOffice, SWFTools, ImageMagick and others 1. Install/Unzip MySQL (XAMPP) and create an empty database, for example: [sourcecode language=”text” gutter=”true” wraplines=”false”] create database alfresco; grant all on alfresco.* to alfresco@localhost identified by ‘alfresco’; grant all on alfresco.* to alfresco@localhost.localdomain identified by ‘alfresco’; [/sourcecode] 2. Install ImageMagick and SWFTools. Make sure you both exist in PATH system variable and you can run them from any place. 3. Install OpenOffice and make sure you can run it from any place. 4. Setup the Windows NetBios DLLs for CIFS Server: Copy Win32Utils.dll and Win32NetBIOS.dll placed in (C:\2workspace\alfresco20110615\HEAD\root\projects\alfresco-jlan\jni) to the env.TOMCAT_HOME/bin folder. Pre-configure Alfresco before building 1. Create the file alfresco-global.properties ﻿in C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\shared\classes with the following content: [sourcecode language=”text” gutter=”true” wraplines=”false”] dir.root=C:/1bpms-demo/alfresco_scratch/tomcat-6.0.32_app/alf_data web.application.context.url=http://127.0.0.1:8080/alfresco database connection properties db.driver=org.gjt.mm.mysql.Driver db.username=root db.password= db.name=alfresco db.url=jdbc:mysql://localhost/alfresco External executable locations ooo.exe=C:/1bpms-demo/openoffice-3.2/App/openoffice/program/soffice.exe ooo.enabled=false img.root=C:/1bpms-demo/ImageMagick-6.7.0-Q16 img.dyn=${img.root}/lib img.exe=${img.root}/convert swf.exe=C:/1bpms-demo/swftools0.9.1/pdf2swf.exe jodconverter.enabled=true jodconverter.officeHome=C:/1bpms-demo/openoffice-3.2/App/openoffice jodconverter.portNumbers=8101 [/sourcecode] 2. Copy mysql-connector-java-5.1.13-bin.jar to C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\lib 3. Modify shared.loader property of the catalina.properties file with following value: [sourcecode language=”text” gutter=”true” wraplines=”false”] shared.loader=${catalina.base}/shared/classes,${catalina.base}/shared/lib/*.jar [/sourcecode] Building: All targets for building Alfresco are within build.xml. You can use ant -projecthelp to see all the available options. Here are a few of the common commands: [sourcecode language=”text” gutter=”true” wraplines=”false”] ant build-tomcat builds and deploys Alfresco for Tomcat ant incremental-tomcat incrementally builds and deploys Alfresco for Tomcat ant start-tomcat-application executes the Tomcat start up script ant build-jboss builds and deploys Alfresco for JBoss ant incremental-jboss incrementally builds and deploys Alfresco for JBoss ant start-jboss executes the JBoss start up script ant test runs unit tests for the entire project [/sourcecode] 1. Run target “build-tomcat” from Eclipse. 2. Eclipse will create alfresco.war and share.war, they will be copied to webapps folder in Tomcat. 3. Now, Alfresco now is ready to be deployed. [caption id=”” align=”alignnone” width=”631” caption=”Alfresco ECM deployed from Eclipse”][/caption] Launch Tomcat/Alfresco 1. Run Tomcat from C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin\startup.bat. Make sure MySQL is running before. Alfresco database schema will be created and you will see all log of activity in the console. 2. If you want deploy/run alfresco from Eclipse: In Eclipse add a new server instance from “C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app”. Edit launch configuration properties of this server adding new VM arguments as: [sourcecode language=”text” gutter=”true” wraplines=”false”] -Dcatalina.base=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app” -Dcatalina.home=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app” -Dwtp.deploy=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\webapps” -Djava.endorsed.dirs=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\endorsed” -Xms256m -Xmx1024m -Xss96k -XX:MaxPermSize=256m -server -Djava.library.path=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin” [/sourcecode] Now, from Eclipse Server window run Tomcat instance. Test Alfresco Open a browser and go to http://localhost:8080/alfresco or http://localhost:8080/share and enter admin/admin as user/password. END." />
<link rel="canonical" href="https://holisticsecurity.io/2011/06/21/building-alfresco-ecm-from-scratch/" />
<meta property="og:url" content="https://holisticsecurity.io/2011/06/21/building-alfresco-ecm-from-scratch/" />
<meta property="og:site_name" content="Holistic Security" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-06-21T19:19:02+02:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://holisticsecurity.io/2011/06/21/building-alfresco-ecm-from-scratch/"},"url":"https://holisticsecurity.io/2011/06/21/building-alfresco-ecm-from-scratch/","headline":"Building Alfresco ECM from scratch","dateModified":"2011-06-21T19:19:02+02:00","datePublished":"2011-06-21T19:19:02+02:00","description":"This article show us how to build Alfresco from scratch which is useful when extending or bug fixing. [caption id=”” align=”aligncenter” width=”236” caption=”Alfresco ECM”][/caption] Requisites: 1. Windows XP 2. Java/JDK 1.6.0_21 (http://www.oracle.com/technetwork/java/javase/downloads/index.html) 3. Eclipse EE Helios SR2 (http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr2) 4. Subversion plugin for Eclipse (downloaded from Eclipse Marketplace) 5. Apache Tomcat 6.0.32 (http://tomcat.apache.org/download-60.cgi) 6. MySQL (XAMPP - http://www.apachefriends.org/en/xampp-windows.html) 7. ImageMagick ﻿6.7.0-Q16 (http://www.imagemagick.org/script/binary-releases.php#windows) 8. SWFTools 0.9.1 (http://www.swftools.org/download.html) 9. OpenOffice 3.2 (http://download.openoffice.org/index.html) 10. Alfresco source code downloaded from SVN on 15/June. [caption id=”” align=”alignnone” width=”493” caption=”Alfresco ECM: Community - version 4.0.0”][/caption] Setup development environment: JDK 1. Install JDK and set two system variables (JAVA_HOME and PATH): [sourcecode language=”text” gutter=”true” wraplines=”false”] JAVA_HOME=C:\\1bpms-demo\\jdk160_21 PATH=%PATH%;%JAVA_HOME%\\bin [/sourcecode] Apache Tomcat 1. Install/Unzip Apache Tomcat in the folder above, for example, C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app 2. Create setenv.bat in C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app\\bin file with the following content: [sourcecode language=”text” gutter=”true” wraplines=”false”] set JAVA_OPTS=-Xms256m -Xmx1024m -Xss96k -XX:MaxPermSize=256m -server set JAVA_OPTS=%JAVA_OPTS% [/sourcecode] Eclipse 1. Unzip Eclipse into C:\\1bpms-demo\\eclipse-jee-helios-SR2. 2. Open Eclipse and install Subclipse plugin from Eclipse Marketplace. 3. Create a folder where will download and build the Alfresco source code, for example﻿ C:\\1bpms-demo\\alfresco_scratch. 4. Switch to “SVN Repository Exploring” perspective. Create a new SVN repository location, enter &lt;svn://svn.alfresco.com&gt; as the URL, then click on “alfresco” folder and do checkout as project in the workspace. 5. Configure ANT runtime in Eclipse. Go to Window &gt; Preferences &gt; Ant &gt; Runtime &gt; Properties and add 3 properties: [sourcecode language=”text” gutter=”true” wraplines=”false”] env.APP_TOMCAT_HOME=C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app env.TOMCAT_HOME=C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app env.VIRTUAL_TOMCAT_HOME=C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_virtual [/sourcecode] In my case, env.VIRTUAL_TOMCAT_HOME is an empty folder. 5. Create an ANT project. - Select New &gt; Project in the Eclipse toolbar. Under “General” choose “Project”. - Right-click the project and choose New &gt; File - When the new file dialog box appears click the Advanced button and select “Link to file in the file system”. - Browse to the build.xml file located in the HEAD\\root directory. MySQL, OpenOffice, SWFTools, ImageMagick and others 1. Install/Unzip MySQL (XAMPP) and create an empty database, for example: [sourcecode language=”text” gutter=”true” wraplines=”false”] create database alfresco; grant all on alfresco.* to alfresco@localhost identified by ‘alfresco’; grant all on alfresco.* to alfresco@localhost.localdomain identified by ‘alfresco’; [/sourcecode] 2. Install ImageMagick and SWFTools. Make sure you both exist in PATH system variable and you can run them from any place. 3. Install OpenOffice and make sure you can run it from any place. 4. Setup the Windows NetBios DLLs for CIFS Server: Copy Win32Utils.dll and Win32NetBIOS.dll placed in (C:\\2workspace\\alfresco20110615\\HEAD\\root\\projects\\alfresco-jlan\\jni) to the env.TOMCAT_HOME/bin folder. Pre-configure Alfresco before building 1. Create the file alfresco-global.properties ﻿in C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app\\shared\\classes with the following content: [sourcecode language=”text” gutter=”true” wraplines=”false”] dir.root=C:/1bpms-demo/alfresco_scratch/tomcat-6.0.32_app/alf_data web.application.context.url=http://127.0.0.1:8080/alfresco database connection properties db.driver=org.gjt.mm.mysql.Driver db.username=root db.password= db.name=alfresco db.url=jdbc:mysql://localhost/alfresco External executable locations ooo.exe=C:/1bpms-demo/openoffice-3.2/App/openoffice/program/soffice.exe ooo.enabled=false img.root=C:/1bpms-demo/ImageMagick-6.7.0-Q16 img.dyn=${img.root}/lib img.exe=${img.root}/convert swf.exe=C:/1bpms-demo/swftools0.9.1/pdf2swf.exe jodconverter.enabled=true jodconverter.officeHome=C:/1bpms-demo/openoffice-3.2/App/openoffice jodconverter.portNumbers=8101 [/sourcecode] 2. Copy mysql-connector-java-5.1.13-bin.jar to C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app\\lib 3. Modify shared.loader property of the catalina.properties file with following value: [sourcecode language=”text” gutter=”true” wraplines=”false”] shared.loader=${catalina.base}/shared/classes,${catalina.base}/shared/lib/*.jar [/sourcecode] Building: All targets for building Alfresco are within build.xml. You can use ant -projecthelp to see all the available options. Here are a few of the common commands: [sourcecode language=”text” gutter=”true” wraplines=”false”] ant build-tomcat builds and deploys Alfresco for Tomcat ant incremental-tomcat incrementally builds and deploys Alfresco for Tomcat ant start-tomcat-application executes the Tomcat start up script ant build-jboss builds and deploys Alfresco for JBoss ant incremental-jboss incrementally builds and deploys Alfresco for JBoss ant start-jboss executes the JBoss start up script ant test runs unit tests for the entire project [/sourcecode] 1. Run target “build-tomcat” from Eclipse. 2. Eclipse will create alfresco.war and share.war, they will be copied to webapps folder in Tomcat. 3. Now, Alfresco now is ready to be deployed. [caption id=”” align=”alignnone” width=”631” caption=”Alfresco ECM deployed from Eclipse”][/caption] Launch Tomcat/Alfresco 1. Run Tomcat from C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app\\bin\\startup.bat. Make sure MySQL is running before. Alfresco database schema will be created and you will see all log of activity in the console. 2. If you want deploy/run alfresco from Eclipse: In Eclipse add a new server instance from “C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app”. Edit launch configuration properties of this server adding new VM arguments as: [sourcecode language=”text” gutter=”true” wraplines=”false”] -Dcatalina.base=”C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app” -Dcatalina.home=”C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app” -Dwtp.deploy=”C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app\\webapps” -Djava.endorsed.dirs=”C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app\\endorsed” -Xms256m -Xmx1024m -Xss96k -XX:MaxPermSize=256m -server -Djava.library.path=”C:\\1bpms-demo\\alfresco_scratch\\tomcat-6.0.32_app\\bin” [/sourcecode] Now, from Eclipse Server window run Tomcat instance. Test Alfresco Open a browser and go to http://localhost:8080/alfresco or http://localhost:8080/share and enter admin/admin as user/password. END.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://holisticsecurity.io/feed.xml" title="Holistic Security" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-156433649-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/"><img src="/assets/img/logo-holosec.png" width="100" /> Holistic Security</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Home</a><a class="page-link" href="/blog/">Blog</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Building Alfresco ECM from scratch</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2011-06-21T19:19:02+02:00" itemprop="datePublished">Jun 21, 2011 
      </time>&sim; ECM
      &sim; ALFRESCO
    </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>This article show us how to build Alfresco from scratch which is useful when extending or bug fixing.</p>

<p>[caption id=”” align=”aligncenter” width=”236” caption=”Alfresco ECM”]<img src="/assets/logo_01_alfresco.png" alt="Alfresco ECM" />[/caption]</p>

<h2 id="requisites">Requisites:</h2>

<p>1. Windows XP<br />
2. Java/JDK 1.6.0_21 (<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>)<br />
3. Eclipse EE Helios SR2 (<a href="http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr2">http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr2</a>)<br />
4. Subversion plugin for Eclipse (downloaded from Eclipse Marketplace)<br />
5. Apache Tomcat 6.0.32 (<a href="http://tomcat.apache.org/download-60.cgi">http://tomcat.apache.org/download-60.cgi</a>)<br />
6. MySQL (XAMPP - <a href="http://www.apachefriends.org/en/xampp-windows.html">http://www.apachefriends.org/en/xampp-windows.html</a>)<br />
7. ImageMagick ﻿6.7.0-Q16 (<a href="http://www.imagemagick.org/script/binary-releases.php#windows">http://www.imagemagick.org/script/binary-releases.php#windows</a>)<br />
8. SWFTools 0.9.1 (<a href="http://www.swftools.org/download.html">http://www.swftools.org/download.html</a>)<br />
9. OpenOffice 3.2 (<a href="http://download.openoffice.org/index.html">http://download.openoffice.org/index.html</a>)<br />
10. Alfresco source code downloaded from SVN on 15/June.</p>

<p>[caption id=”” align=”alignnone” width=”493” caption=”Alfresco ECM: Community - version 4.0.0”]<img src="/assets/build_alfresco_scratch_0.png" alt="Alfresco ECM: Community - version 4.0.0" />[/caption]</p>

<h2 id="setup-development-environment">Setup development environment:</h2>

<h3 id="jdk">JDK</h3>
<p>1. Install JDK and set two system variables (JAVA_HOME and PATH):</p>

<p>[sourcecode language=”text” gutter=”true” wraplines=”false”]<br />
JAVA_HOME=C:\1bpms-demo\jdk160_21<br />
PATH=%PATH%;%JAVA_HOME%\bin</p>

<p>[/sourcecode]</p>

<h3 id="apache-tomcat">Apache Tomcat</h3>

<p>1. Install/Unzip Apache Tomcat in the folder above, for example, <strong>C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app</strong>
2. Create <strong>setenv.bat</strong> in <strong>C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin</strong> file with the following content:</p>

<p>[sourcecode language=”text” gutter=”true” wraplines=”false”]<br />
set JAVA_OPTS=-Xms256m -Xmx1024m -Xss96k -XX:MaxPermSize=256m -server<br />
set JAVA_OPTS=%JAVA_OPTS%</p>

<p>[/sourcecode]</p>

<h3 id="eclipse">Eclipse</h3>

<p>1. Unzip Eclipse into <strong>C:\1bpms-demo\eclipse-jee-helios-SR2</strong>.
2. Open Eclipse and install Subclipse plugin from Eclipse Marketplace.
3. Create a folder where will download and build the Alfresco source code, for example﻿ <strong>C:\1bpms-demo\alfresco_scratch</strong>.
4. Switch to “SVN Repository Exploring” perspective.<br />
Create a new SVN repository location, enter <strong>&lt;svn://svn.alfresco.com&gt;</strong> as the URL, then click on “alfresco” folder and do checkout as project in the workspace.
5. Configure ANT runtime in Eclipse.<br />
Go to <strong>Window &gt; Preferences &gt; Ant &gt; Runtime &gt; Properties</strong> and add 3 properties:</p>

<p>[sourcecode language=”text” gutter=”true” wraplines=”false”]<br />
env.APP_TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app<br />
env.TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app<br />
env.VIRTUAL_TOMCAT_HOME=C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_virtual</p>

<p>[/sourcecode]
In my case, env.VIRTUAL_TOMCAT_HOME is an empty folder.
5. Create an ANT project. 
- Select New &gt; Project in the Eclipse toolbar. Under “General” choose “Project”.<br />
- Right-click the project and choose New &gt; File<br />
- When the new file dialog box appears click the Advanced button and select “Link to file in the file system”.<br />
- Browse to the build.xml file located in the HEAD\root directory.</p>

<h3 id="mysql-openoffice-swftools-imagemagick-and-others">MySQL, OpenOffice, SWFTools, ImageMagick and others</h3>

<p>1. Install/Unzip MySQL (XAMPP) and create an empty database, for example:</p>

<p>[sourcecode language=”text” gutter=”true” wraplines=”false”]<br />
create database alfresco;<br />
grant all on alfresco.* to alfresco@localhost identified by ‘alfresco’;<br />
grant all on alfresco.* to alfresco@localhost.localdomain identified by ‘alfresco’;</p>

<p>[/sourcecode]
2. Install ImageMagick and SWFTools. Make sure you both exist in PATH system variable and you can run them from any place.
3. Install OpenOffice and make sure you can run it from any place.
4. Setup the Windows NetBios DLLs for CIFS Server:<br />
Copy <strong>Win32Utils.dll</strong> and <strong>Win32NetBIOS.dll</strong> placed in (C:\2workspace\alfresco20110615\HEAD\root\projects\alfresco-jlan\jni) to the <strong>env.TOMCAT_HOME/bin</strong> folder.</p>

<h2 id="pre-configure-alfresco-before-building">Pre-configure Alfresco before building</h2>

<p>1. Create the file <strong>alfresco-global.properties</strong> ﻿in <strong>C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\shared\classes</strong> with the following content:</p>

<p>[sourcecode language=”text” gutter=”true” wraplines=”false”]<br />
dir.root=C:/1bpms-demo/alfresco_scratch/tomcat-6.0.32_app/alf_data<br />
web.application.context.url=http://127.0.0.1:8080/alfresco</p>

<h3 id="database-connection-properties">database connection properties</h3>

<p>db.driver=org.gjt.mm.mysql.Driver<br />
db.username=root<br />
db.password=<br />
db.name=alfresco<br />
db.url=jdbc:mysql://localhost/alfresco</p>

<h3 id="external-executable-locations">External executable locations</h3>

<p>ooo.exe=C:/1bpms-demo/openoffice-3.2/App/openoffice/program/soffice.exe<br />
ooo.enabled=false<br />
img.root=C:/1bpms-demo/ImageMagick-6.7.0-Q16<br />
img.dyn=${img.root}/lib<br />
img.exe=${img.root}/convert<br />
swf.exe=C:/1bpms-demo/swftools0.9.1/pdf2swf.exe<br />
jodconverter.enabled=true<br />
jodconverter.officeHome=C:/1bpms-demo/openoffice-3.2/App/openoffice<br />
jodconverter.portNumbers=8101</p>

<p>[/sourcecode]
2. Copy <strong>mysql-connector-java-5.1.13-bin.jar</strong> to <strong>C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\lib</strong>
3. Modify <strong>shared.loader</strong> property of the catalina.properties file with following value:</p>

<p>[sourcecode language=”text” gutter=”true” wraplines=”false”]<br />
shared.loader=${catalina.base}/shared/classes,${catalina.base}/shared/lib/*.jar</p>

<p>[/sourcecode]</p>

<h2 id="building">Building:</h2>

<p>All targets for building Alfresco are within <strong>build.xml</strong>.<br />
You can use ant -projecthelp to see all the available options. Here are a few of the common commands:</p>

<p>[sourcecode language=”text” gutter=”true” wraplines=”false”]<br />
ant build-tomcat builds and deploys Alfresco for Tomcat<br />
ant incremental-tomcat incrementally builds and deploys Alfresco for Tomcat<br />
ant start-tomcat-application executes the Tomcat start up script<br />
ant build-jboss builds and deploys Alfresco for JBoss<br />
ant incremental-jboss incrementally builds and deploys Alfresco for JBoss<br />
ant start-jboss executes the JBoss start up script<br />
ant test runs unit tests for the entire project</p>

<p>[/sourcecode]
1. Run target “build-tomcat” from Eclipse.
2. Eclipse will create alfresco.war and share.war, they will be copied to webapps folder in Tomcat. 
3. Now, Alfresco now is ready to be deployed.</p>

<p>[caption id=”” align=”alignnone” width=”631” caption=”Alfresco ECM deployed from Eclipse”]<img src="/assets/build_alfresco_scratch.png" alt="Alfresco ECM deployed from Eclipse" />[/caption]</p>

<h2 id="launch-tomcatalfresco">Launch Tomcat/Alfresco</h2>

<p>1. Run Tomcat from C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin\startup.bat. Make sure MySQL is running before.
Alfresco database schema will be created and you will see all log of activity in the console.
2. If you want deploy/run alfresco from Eclipse: 
In Eclipse add a new server instance from “C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app”.<br />
Edit launch configuration properties of this server adding new VM arguments as:</p>

<p>[sourcecode language=”text” gutter=”true” wraplines=”false”]<br />
-Dcatalina.base=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app”<br />
-Dcatalina.home=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app”<br />
-Dwtp.deploy=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\webapps”<br />
-Djava.endorsed.dirs=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\endorsed”<br />
-Xms256m -Xmx1024m -Xss96k -XX:MaxPermSize=256m -server<br />
-Djava.library.path=”C:\1bpms-demo\alfresco_scratch\tomcat-6.0.32_app\bin”</p>

<p>[/sourcecode]
Now, from Eclipse Server window run Tomcat instance.</p>

<h2 id="test-alfresco">Test Alfresco</h2>

<p>Open a browser and go to http://localhost:8080/alfresco or http://localhost:8080/share and enter admin/admin as user/password.
END.</p>

  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://holisticsecurity.io/2011/06/21/building-alfresco-ecm-from-scratch/';
      this.page.identifier = 'https://holisticsecurity.io/2011/06/21/building-alfresco-ecm-from-scratch/';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://holosec.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/2011/06/21/building-alfresco-ecm-from-scratch/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><img src="/assets/img/logo-holosec.png" width="40" /> Holistic Security</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Holistic Security</li><li><a class="u-email" href="mailto:blog@holisticsecurity.io">blog@holisticsecurity.io</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Chilcano</span></a></li><li><a href="https://www.linkedin.com/in/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">Chilcano</span></a></li><li><a href="https://www.twitter.com/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">Chilcano</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Systems Thinking, Holism, Trust, Security &amp; Usability.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
