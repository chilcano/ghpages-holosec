<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Gobernando Servicios de Alfresco ECM con WSO2 | Holistic Security</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Gobernando Servicios de Alfresco ECM con WSO2" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="El beneficio principal de hacer SOA sobre hacer Integración es la capacidad de gobierno que tenemos sobre los servicios, es decir, la capacidad de control que alcanzamos al aplicar los principios SOA. En la integración o construcción de aplicaciones muchas veces tenemos que integrar o consumir servicios externos “no gobernados”, hacerlo sin control es siempre un riesgo, por ejemplo, si el contrato (WSDL) cambia, nuestra aplicación integrada se quedaría al margen de los cambios y sin soporte. Gobierno de los servicio de Alfresco con WSO2 En esta post aprenderemos cómo registrar servicios externos en WSO2 Registry, concretamente aquellos servicios SOAP de Alfresco ECM, y luego consumirlos usando el mismo WSDL (contrato) desde nuestras aplicaciones de negocio usando WSO2 ESB." />
<meta property="og:description" content="El beneficio principal de hacer SOA sobre hacer Integración es la capacidad de gobierno que tenemos sobre los servicios, es decir, la capacidad de control que alcanzamos al aplicar los principios SOA. En la integración o construcción de aplicaciones muchas veces tenemos que integrar o consumir servicios externos “no gobernados”, hacerlo sin control es siempre un riesgo, por ejemplo, si el contrato (WSDL) cambia, nuestra aplicación integrada se quedaría al margen de los cambios y sin soporte. Gobierno de los servicio de Alfresco con WSO2 En esta post aprenderemos cómo registrar servicios externos en WSO2 Registry, concretamente aquellos servicios SOAP de Alfresco ECM, y luego consumirlos usando el mismo WSDL (contrato) desde nuestras aplicaciones de negocio usando WSO2 ESB." />
<link rel="canonical" href="https://holisticsecurity.io/2012/09/03/gobernando-servicios-de-alfresco-ecm-con-wso2" />
<meta property="og:url" content="https://holisticsecurity.io/2012/09/03/gobernando-servicios-de-alfresco-ecm-con-wso2" />
<meta property="og:site_name" content="Holistic Security" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-09-03T18:57:49+02:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://holisticsecurity.io/2012/09/03/gobernando-servicios-de-alfresco-ecm-con-wso2"},"url":"https://holisticsecurity.io/2012/09/03/gobernando-servicios-de-alfresco-ecm-con-wso2","headline":"Gobernando Servicios de Alfresco ECM con WSO2","dateModified":"2012-09-03T18:57:49+02:00","datePublished":"2012-09-03T18:57:49+02:00","description":"El beneficio principal de hacer SOA sobre hacer Integración es la capacidad de gobierno que tenemos sobre los servicios, es decir, la capacidad de control que alcanzamos al aplicar los principios SOA. En la integración o construcción de aplicaciones muchas veces tenemos que integrar o consumir servicios externos “no gobernados”, hacerlo sin control es siempre un riesgo, por ejemplo, si el contrato (WSDL) cambia, nuestra aplicación integrada se quedaría al margen de los cambios y sin soporte. Gobierno de los servicio de Alfresco con WSO2 En esta post aprenderemos cómo registrar servicios externos en WSO2 Registry, concretamente aquellos servicios SOAP de Alfresco ECM, y luego consumirlos usando el mismo WSDL (contrato) desde nuestras aplicaciones de negocio usando WSO2 ESB.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://holisticsecurity.io/feed.xml" title="Holistic Security" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-156433649-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/"><img src="/assets/img/logo-holosec.png" width="100" /> Holistic Security</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Home</a><a class="page-link" href="/blog/">Blog</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Gobernando Servicios de Alfresco ECM con WSO2</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2012-09-03T18:57:49+02:00" itemprop="datePublished">Sep 3, 2012 
      </time>&sim; ECM · SOA
      &sim; ALFRESCO · SOAPUI · WSDL · WSO2
    </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>El beneficio principal de hacer SOA sobre hacer Integración es la capacidad de gobierno que tenemos sobre los servicios, es decir, la capacidad de control que alcanzamos al aplicar los principios SOA.
En la integración o construcción de aplicaciones muchas veces tenemos que integrar o consumir servicios externos “no gobernados”, hacerlo sin control es siempre un riesgo, por ejemplo, si el contrato (WSDL) cambia, nuestra aplicación integrada se quedaría al margen de los cambios y sin soporte.</p>

<p><a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-logos.png"><img src="/assets/alfresco-wso2-logos.png" alt="Gobierno de los servicio de Alfresco con WSO2" /></a> <em>Gobierno de los servicio de Alfresco con WSO2</em></p>

<p>En esta post aprenderemos cómo registrar servicios externos en WSO2 Registry, concretamente aquellos servicios SOAP de Alfresco ECM, y luego consumirlos usando el mismo WSDL (contrato) desde nuestras aplicaciones de negocio usando WSO2 ESB.</p>

<!-- more -->

<p><strong>I. Estrategia:</strong></p>

<p>Para iniciar con el Gobierno SOA es necesario gestionar los servicios que vamos a consumir, eso implica registrar los servicios en WSO2 Registry, una vez realizado esto alcanzaríamos otros beneficios como: capacidad de medir, ofrecer otra interficie SOA, controlar la QoS, mejorar la Seguridad, gestionar versiones, encadenar servicios, etc.
Por estos motivos, WSO2 Registry es una herramienta fundamental para hacer Gobierno SOA y a partir de este sencillo principio SOA se abren infinitos escenarios de aplicación y de negocio.
En este post sólo registraremos un servicio de Alfresco ECM en WSO2 Registry, pero podría ser posible extender de manera rápida y fácil al resto de servicios SOAP, incluso al resto de servicios REST de Alfresco, además aprovechar la capacidad integradora de WSO2 ESB para “jugar” un poco con los servicios de Alfresco llegando incluso a brindar una nueva capa “gobernada” de servicios de gestión documental, es decir, un API completo de gestión documental.
 <strong>II. Objetivos</strong> :</p>
<ol>
  <li>Saber identificar Aplicación externa y servicios externos (endpoints, WSDLs,..) a usar (integrarlos) en nuestra aplicación interna.</li>
  <li>Aprender a registrar servicios externos en WSO2 Registry.</li>
  <li>Aprender a crear EndPoint interno en WSO2 ESB.</li>
  <li>Aprender a crear Proxy para dicho servicio manteniendo mismo “contrato” y usando nuevo EndPoint desde WSO2 ESB.</li>
  <li>Saber consumir el nuevo servicio recientemente registrado con WSO2 TryIt y con soapUI.
 <strong>III. Requerimientos</strong> :
Emplearemos WSO2 Stratos Live, para ello debemos crearenos una cuenta y nos asegurarmos de que WSO2 ESB y WSO2 Registry estén habilitados.
 <strong>IV. Pasos</strong> :</li>
</ol>

<p><strong>1. Identificar Aplicación externa y sus servicios externos (Endpoints, WSDLs,..)</strong></p>

<p>En este caso usaremos Alfresco ECM como aquella aplicación que queremos integrar a la nuestra interna pero consumiendo únicamente sus servicios. Alfresco brinda una serie de servicios de gestión documental, esto son:</p>
<ul>
  <li>Servicios SOAP ad-hoc</li>
  <li>Servicios basados en CMIS</li>
</ul>

<p>[caption id=”” align=”alignnone” width=”394”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-00.png"><img src="/assets/alfresco-wso2-00.png" alt="WSDLs de Alfresco ECM" /></a> WSDLs de Alfresco ECM[/caption]</p>
<ul>
  <li>Servicios REST ad-hoc</li>
</ul>

<p>[caption id=”” align=”alignnone” width=”416”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-01.png"><img src="/assets/alfresco-wso2-01.png" alt="Servicios REST de Alfresco ECM" /></a> Servicios REST de Alfresco ECM[/caption]</p>

<p><strong>2. Desde WSO2 Registry, añadir servicios a partir de WSDLs.</strong></p>

<p>En este caso usaremos únicamente el servicio de autenticación de alfresco (SOAP), a modo de ejemplo, aunque dejamos también el servicio de Repositorio:</p>
<ul>
  <li><a href="http://www.konosys.es:8014/alfresco/api/AuthenticationService?wsdl">http://www.konosys.es:8014/alfresco/api/AuthenticationService?wsdl</a></li>
  <li><a href="http://www.konosys.es:8014/alfresco/api/RepositoryService?wsdl">http://www.konosys.es:8014/alfresco/api/RepositoryService?wsdl</a></li>
</ul>

<p>[caption id=”” align=”alignnone” width=”548”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-02.png"><img src="/assets/alfresco-wso2-02.png" alt="Registrando los WSDL en WSO2 Registry" /></a> Registrando los WSDL en WSO2 Registry[/caption]
En WSO2 Registry aparecerán 2 servicios registrados (uno por cada WSDL).</p>

<p>[caption id=”” align=”alignnone” width=”565”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-03.png"><img src="/assets/alfresco-wso2-03.png" alt="Servicios registrados" /></a> Servicios registrados[/caption]</p>

<p><strong>3. En WSO2 ESB, crear un nuevo “Address Endpoint” y guardarlo en el Governance Registry.</strong></p>

<p>[caption id=”” align=”alignnone” width=”545”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-04.png"><img src="/assets/alfresco-wso2-04.png" alt="Creando EndPoints" /></a> Creando EndPoints[/caption]
Crear “Address Endpoint” con los sgtes datos:
    Nombre Endpoint: “kns.alfr.authn.ep0”
    Valor: “http://www.konosys.es:8014/alfresco/api/AuthenticationService” (verlo en el WSDL, como se muestra en la figura de abajo).
    Key: “gov:/ kns.alfr.authn.ep0”</p>

<p>[caption id=”” align=”alignnone” width=”546”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-05.png"><img src="/assets/alfresco-wso2-05.png" alt="Obteniendo EndPoint desde el WSDL" /></a> Obteniendo EndPoint desde el WSDL[/caption]
Durante el proceso de creación del Endpoint hacer click en el botón “Save As”, te solicitará dónde guardar dicha entrada. Elegir Governance Registry con el nombre de la entrada por defecto (mismo nombre del endpoint).</p>

<p>[caption id=”” align=”alignnone” width=”531”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-06.png"><img src="/assets/alfresco-wso2-06.png" alt="Asignando EndPoint a servicio" /></a> Asignando EndPoint a servicio[/caption]
Finalmente, si todo ha ido bien, se mostrarán los Dynamic Endpoints, verificar que nuestro endpoint esté en la lista.</p>

<p>[caption id=”” align=”alignnone” width=”495”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-07.png"><img src="/assets/alfresco-wso2-07.png" alt="Dynamic EndPoint creado" /></a> Dynamic EndPoint creado[/caption]</p>

<p><strong>4. Desde WSO2 ESB, crear Proxy para dicho servicio manteniendo mismo WSDL y usando nuevo Endpoint.</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Nombre Proxy: “kns.alfr.authn.ep0”
WSDL: seleccionarlo desde Governance Registry.
Endpoint: seleccionarlo desde Governance Registry.
</code></pre></div></div>

<p>[caption id=”” align=”alignnone” width=”577”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-08.png"><img src="/assets/alfresco-wso2-08.png" alt="WSO2 ESB - Creando un Custom Proxy" /></a> WSO2 ESB - Creando un Custom Proxy[/caption]
Luego, asignarle un nombre al proxy y seleccionar el WSDL alojado en el Registry.</p>

<p>[caption id=”” align=”alignnone” width=”558”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-09.png"><img src="/assets/alfresco-wso2-09.png" alt="WSO2 ESB - Seleccionando el WSDL desde el registro" /></a> WSO2 ESB - Seleccionando el WSDL desde el registro[/caption]
Luego, hacer click sobre el botón “Next” para continuar con la configuración del Proxy. En la nueva pantalla tendremos la oportunidad de seleccionar el Endpoint que habiamos creado inicialmente.</p>

<p>[caption id=”” align=”alignnone” width=”536”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-10.png"><img src="/assets/alfresco-wso2-10.png" alt="WSO2 ESB - Seleccionando el EndPoint desde el Registry" /></a> WSO2 ESB - Seleccionando el EndPoint desde el Registry[/caption]
Haga click en “Next” y en el último paso hacer click sobre “Finish”.</p>

<p>[caption id=”” align=”alignnone” width=”536”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-11.png"><img src="/assets/alfresco-wso2-11.png" alt="WSO2 ESB - Finalizando la creación del Proxy" /></a> WSO2 ESB - Finalizando la creación del Proxy[/caption]
Si hemos llegado a este punto, ya habremos creado un Proxy con el que ya podemos invocar el servicio desde cualquier aplicación cliente SOAP. En este caso para probarlo usaremos el servicio TryIt de WSO2, para ello hacer click sobre “Try this service”.</p>

<p>[caption id=”” align=”alignnone” width=”495”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-12.png"><img src="/assets/alfresco-wso2-12.png" alt="WSO2 ESB - Listo para probar el Proxy" /></a> WSO2 ESB - Listo para probar el Proxy[/caption]</p>

<p><strong>5. Probando el Servicio con WSO2 TryIt</strong></p>

<p>WSO2 viene con una herramienta para probar servicios, se llama WSO2 TryIt. En este ejemplo usaremos esta herramienta, aunque también explicamos qué hay que hacer para emplear soapUI.</p>

<p>[caption id=”” align=”alignnone” width=”598”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-13.png"><img src="/assets/alfresco-wso2-13.png" alt="WSO2 TryIt - Probando Servicios" /></a> WSO2 TryIt - Probando Servicios[/caption]</p>

<p><strong>6. Probando el Servicio con soapUI.</strong></p>

<p>En este caso asegurarse de que estemos usando el Endpoint correcto, para ello podéis copiar el Endpoint que se muestra en WSO2 TryIt, en nuestro caso sólo son válidos las implementaciones de SOAP 1.2 y SOAP 1.1, estas son:</p>
<ul>
  <li><a href="http://esb.stratoslive.wso2.com:8280/services/t/konosys.es/kns.alfr.proxy.authn0.kns.alfr.proxy.authn0HttpSoap12Endpoint">http://esb.stratoslive.wso2.com:8280/services/t/konosys.es/kns.alfr.proxy.authn0.kns.alfr.proxy.authn0HttpSoap12Endpoint</a></li>
  <li><a href="http://esb.stratoslive.wso2.com:8280/services/t/konosys.es/kns.alfr.proxy.authn0.kns.alfr.proxy.authn0HttpSoap11Endpoint">http://esb.stratoslive.wso2.com:8280/services/t/konosys.es/kns.alfr.proxy.authn0.kns.alfr.proxy.authn0HttpSoap11Endpoint</a></li>
</ul>

<p>[caption id=”” align=”alignnone” width=”581”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-14.png"><img src="/assets/alfresco-wso2-14.png" alt="Probando Servicio con soapUI" /></a> Probando Servicio con soapUI[/caption]</p>

<p><strong>V. Observaciones</strong></p>
<ul>
  <li>Si se muestra este error, es probable que hayas configurado incorrectamente el Proxy. Para solucionarlo prueba revisando la configuración del Proxy, concretamente el Endpoint. Una forma rápida de probarlo sería reemplazar el Endpoint que se muestra en TryIt por el real (no pasamos por WSO2 ESB), concretamente usar:</li>
  <li><a href="http://www.konosys.es/alfresco/api/AuthenticationService">http://www.konosys.es/alfresco/api/AuthenticationService</a></li>
</ul>

<p>[caption id=”” align=”alignnone” width=”617”]<a href="https://dl.dropbox.com/u/2961879/blog20120903_gov_alfresco_services_with_wso2/alfresco-wso2-15.png"><img src="/assets/alfresco-wso2-15.png" alt="WSO2 TryIt - Error" /></a> WSO2 TryIt - Error[/caption]</p>
<ul>
  <li>Durante el desarrollo de este blog hicimos unos cambios en nuestra web de demos, reemplazamos el puerto 8014 por 80, asi que si algo no funciona, intenta cambiar los puertos.
<strong>VI. Recursos usados</strong> :</li>
  <li>WSO2 Stratos Live:</li>
</ul>
<p><a href="https://stratoslive.wso2.com/home/index.html">https://stratoslive.wso2.com/home/index.html</a></p>
<ul>
  <li>Alfresco Web Services:</li>
</ul>
<p><a href="http://wiki.alfresco.com/wiki/Alfresco_Content_Management_Web_Services">http://wiki.alfresco.com/wiki/Alfresco_Content_Management_Web_Services</a></p>
<ul>
  <li>Alfresco Authentication y Repository Services WSDL:</li>
</ul>
<p><a href="http://www.konosys.es/alfresco/api/AuthenticationService?wsdl">http://www.konosys.es/alfresco/api/AuthenticationService?wsdl</a><br />
<a href="http://www.konosys.es/alfresco/api/RepositoryService?wsdl">http://www.konosys.es/alfresco/api/RepositoryService?wsdl</a></p>
<ul>
  <li>Alfresco CMIS services:</li>
</ul>
<p><a href="http://www.konosys.es/alfresco/service/cmis/index.html">http://www.konosys.es/alfresco/service/cmis/index.html</a></p>
<ul>
  <li>Alfresco REST services:</li>
</ul>
<p><a href="http://www.konosys.es/alfresco/service/">http://www.konosys.es/alfresco/service/</a>
Fin.
Espero que esto os haya servido.</p>

  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://holisticsecurity.io/2012/09/03/gobernando-servicios-de-alfresco-ecm-con-wso2';
      this.page.identifier = 'https://holisticsecurity.io/2012/09/03/gobernando-servicios-de-alfresco-ecm-con-wso2';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://holosec.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/2012/09/03/gobernando-servicios-de-alfresco-ecm-con-wso2" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><img src="/assets/img/logo-holosec.png" width="40" /> Holistic Security</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Holistic Security</li><li><a class="u-email" href="mailto:blog@holisticsecurity.io">blog@holisticsecurity.io</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Chilcano</span></a></li><li><a href="https://www.linkedin.com/in/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">Chilcano</span></a></li><li><a href="https://www.twitter.com/Chilcano"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">Chilcano</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Systems Thinking, Holism, Trust, Security &amp; Usability.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
