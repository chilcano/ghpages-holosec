---
layout: post
title: Install Liferay 6.0.5 CE WAR on Tomcat 6.0.29 and MySQL as non root webapp
  and without Tomcat Manager
date: 2010-08-30 17:24:49.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Linux
- Portal
tags: []
meta:
  _edit_last: '578869'
  _wpas_done_twitter: '1'
  _oembed_9b4093fe555351beb8e3961d12acbb7b: "{{unknown}}"
  _oembed_f08eecde80c4927c0cc576f748f22294: "{{unknown}}"
author:
  login: rcarhuatocto
  email: roger@intix.info
  display_name: Roger CARHUATOCTO
  first_name: ''
  last_name: ''
permalink: "/2010/08/30/install-liferay-605-war-tomcat-6029-mysql-nonroot-manager/"
---
<p>We will explain how to install Liferay 6.0.5 CE WAR bundle in an existing Apache Tomcat 6.0.29 and MySQL Server as non ROOT webapp and without Tomcat Manager.</p>
<p><img class="alignnone" title="Welcome page of Liferay 6.0.5 CE " src="{{ site.baseurl }}/assets/liferay605war_1login.png" alt="" width="509" height="336" /></p>
<p>1. Download and install <a href="http://apache.rediris.es//tomcat/tomcat-6/v6.0.29/bin/apache-tomcat-6.0.29-windows-x86.zip">Apache Tomcat 6.0.29</a> standard bundle (with Tomcat Manager included).</p>
<p><del datetime="2011-01-18T09:37:23+00:00">2. Copy <strong>%TOMCAT_HOME%/webapps/ROOT</strong> folder to <strong>%TOMCAT_HOME%/webapps/liferay605</strong> folder.</del></p>
<p>3. Download <strong>liferay-portal-6.0.5.war</strong> and <strong>liferay-portal-dependencies-6.0.5.zip</strong></p>
<p>4. Unzip <strong>liferay-portal-6.0.5.war</strong> file and copy all content into the new Tomcat Context, in this example will be %TOMCAT_HOME%/webapps/<strong>liferay605</strong> folder.</p>
<p>5. Unzip and copy all dependencies to <del datetime="2011-01-18T10:24:26+00:00"><strong>%TOMCAT_HOME%/lib</strong></del> <strong>%TOMCAT_HOME%/lib/ext</strong></p>
<p>6. Download and copy <strong>02</strong> extra libraries (<strong>jta.jar</strong> and <strong>mail.jar</strong>) to <del datetime="2011-01-18T10:26:57+00:00"><strong>%TOMCAT_HOME%/lib</strong></del> <strong>%TOMCAT_HOME%/lib/ext</strong></p>
<p>7. Create <strong>liferay605.xml</strong> file into <strong>%TOMCAT_HOME%/conf/Catalina/localhost</strong> folder. It looks like this:</p>
<p>[sourcecode language="html" gutter="true" wraplines="false" highlight="1"]<br />
&lt;Context path=&quot;&quot; crossContext=&quot;true&quot;&gt;<br />
  &lt;Resource<br />
    name=&quot;jdbc/LiferayPool&quot;<br />
    auth=&quot;Container&quot;<br />
    type=&quot;javax.sql.DataSource&quot;<br />
    driverClassName=&quot;com.mysql.jdbc.Driver&quot;<br />
    url=&quot;jdbc:mysql://localhost:3306/lportal605_db?useUnicode=true&amp;amp;amp;characterEncoding=UTF-8&quot;<br />
    username=&quot;root&quot;<br />
    password=&quot;&quot;<br />
    maxActive=&quot;20&quot;<br />
  /&gt;<br />
&lt;/Context&gt;<br />
[/sourcecode]</p>
<p>In my case, DB user is "root" with empty password. You must create an empty DB in MySQL before, for example "lportal605_db".</p>
<p>8. Create <strong>portal-ext.properties</strong> into <strong>%TOMCAT_HOME%/webapps/liferay605/WEB-INF/classes</strong> folder. It looks like this:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false" highlight="1"]<br />
jdbc.default.jndi.name=jdbc/LiferayPool<br />
portal.ctx=/liferay605<br />
[/sourcecode]</p>
<p>9. If you are using MySQL as database server instead of HSQL, you must copy <em>mysql jdbc lib</em> into <del datetime="2011-01-18T09:41:06+00:00"><strong>%TOMCAT_HOME%/lib</strong></del> <strong>%TOMCAT_HOME%/lib/ext</strong> folder.</p>
<p>10. Add the code below to <strong>%TOMCAT_HOME%/lib/bin/startup.bat</strong> or <strong>startup.sh</strong>:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false" highlight="1"]<br />
set JAVA_OPTS=%JAVA_OPTS% -Xmx1024m -XX:MaxPermSize=256m<br />
[/sourcecode]</p>
<p>11. Run <strong>startup.bat/sh</strong>, you will see in console when liferay creates and populates the portal database automatically. Now, you can open browser window and enter the folow URL <em>http://localhost:8080/liferay605</em>. Use "<em>test@liferay.com</em>" and "<em>test</em>" as user and password respectively.</p>
<h2>Configure Tomcat Manager</h2>
<p>Sometimes you need to deploy liferay in your favorite hosting provider but It is impossible because you can not change files of root context, in this case you can use only control panel of you ISP o Tomcat Manager.</p>
<p>Tomcat Manager is included in standard Tomcat bundle but by default It is disabled. If you want to enable it, follow the next steps:</p>
<p><img class="alignnone" title="Tomcat Manager - Installed Web Applications" src="{{ site.baseurl }}/assets/liferay605war_2tomcatmanager.png" alt="" width="479" height="601" /></p>
<p>1. Edit %TOMCAT_HOME%/conf/<strong>tomcat-users.xml</strong></p>
<p>2. Add user, for example:</p>
<p>[sourcecode language="xml" gutter="true" wraplines="false" highlight="5"]<br />
&lt;?xml version='1.0' encoding='utf-8'?&gt;<br />
&lt;tomcat-users&gt;<br />
&lt;role rolename=&quot;tomcat&quot;/&gt;<br />
&lt;role rolename=&quot;manager&quot;/&gt;<br />
&lt;user username=&quot;roger&quot; password=&quot;roger&quot; roles=&quot;tomcat,manager&quot;/&gt;<br />
&lt;/tomcat-users&gt;<br />
[/sourcecode]</p>
<p>3. Run Tomcat and go to http://localhost:8080/manager</p>
<p>4. Enter user and password configured in step 2.</p>
<p>5. Log in to Liferay for example; in Tomcat Manager now you can see an opened session in liferay605 webapp context and to explore values stored in current session.</p>
<p><img class="alignnone" title="Tomcat Manager - Values of an opened session in Liferay" src="{{ site.baseurl }}/assets/liferay605war_3tomcatmanagerliferay.png" alt="" width="433" height="601" /></p>
<p>6. End.</p>
<p><strong>References</strong>:</p>
<p>* <a href="http://www.liferay.com/es/community/wiki/-/wiki/Main/Installing+5.2+SP3+WAR+on+Tomcat+6">Installing 5.2 SP3 WAR on Tomcat 6</a></p>
<p>* <a href="http://holisticsecurity.wordpress.com/2010/07/19/execute-liferay-root-context">Execute Liferay Portal on non ROOT context</a></p>
