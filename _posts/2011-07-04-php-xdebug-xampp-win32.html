---
layout: post
title: PHP debugging with XDebug and XAMPP on Win32
date: 2011-07-04 18:16:54.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Security
tags:
- apache
- eclipse
- php
- xampp
- xdebug
meta:
  _edit_last: '578869'
  tagazine-media: a:7:{s:7:"primary";s:86:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-4-debugconf.png";s:6:"images";a:5:{s:89:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-1-xdebugloaded.png";a:6:{s:8:"file_url";s:89:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-1-xdebugloaded.png";s:5:"width";s:3:"627";s:6:"height";s:3:"247";s:4:"type";s:5:"image";s:4:"area";s:6:"154869";s:9:"file_path";s:0:"";}s:94:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-2-eclipsecreateproj.png";a:6:{s:8:"file_url";s:94:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-2-eclipsecreateproj.png";s:5:"width";s:3:"460";s:6:"height";s:3:"538";s:4:"type";s:5:"image";s:4:"area";s:6:"247480";s:9:"file_path";s:0:"";}s:92:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-3-eclipsephpdebug.png";a:6:{s:8:"file_url";s:92:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-3-eclipsephpdebug.png";s:5:"width";s:3:"596";s:6:"height";s:3:"506";s:4:"type";s:5:"image";s:4:"area";s:6:"301576";s:9:"file_path";s:0:"";}s:86:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-4-debugconf.png";a:6:{s:8:"file_url";s:86:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-4-debugconf.png";s:5:"width";s:3:"801";s:6:"height";s:3:"621";s:4:"type";s:5:"image";s:4:"area";s:6:"497421";s:9:"file_path";s:0:"";}s:86:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-5-debugging.png";a:6:{s:8:"file_url";s:86:"http://dl.dropbox.com/u/2961879/blog20110704_phpdebugging/phpdebugging-5-debugging.png";s:5:"width";s:3:"641";s:6:"height";s:3:"368";s:4:"type";s:5:"image";s:4:"area";s:6:"235888";s:9:"file_path";s:0:"";}}s:6:"videos";a:0:{}s:11:"image_count";s:1:"5";s:6:"author";s:6:"578869";s:7:"blog_id";s:7:"2005905";s:9:"mod_stamp";s:19:"2011-07-04
    17:16:54";}
  _wpas_done_twitter: '1'
  _oembed_bdaf6fd85cd503e39483274b44d315de: "{{unknown}}"
  _oembed_8905527ff8753c51e2feee141ceed478: "{{unknown}}"
  twitter_cards_summary_img_size: a:6:{i:0;i:627;i:1;i:247;i:2;i:3;i:3;s:24:"width="627"
    height="247"";s:4:"bits";i:8;s:4:"mime";s:9:"image/png";}
  _oembed_eb51b6efd8d60cd2aa549e1dfd980a74: "{{unknown}}"
author:
  login: rcarhuatocto
  email: roger@intix.info
  display_name: Roger CARHUATOCTO
  first_name: ''
  last_name: ''
permalink: "/2011/07/04/php-xdebug-xampp-win32/"
---
<p>PHP is a powerful language for building from little web applications to bigger applications such as Facebook, Wordpress, Drupal, Joomla, Meneame, Elgg, ...<br />
and several times you need to solve many bugs and manage your source code, then in this case you will need powerful tools to trace errors.<br />
A text editor is not enough for this, Eclipse IDE and PHP Development Tools are a good option.</p>
<p>In this post, you learn how to set your debug environment with XDebug, that seems to be one of the more popular ones and Eclipse PDT already has support for it.</p>
<h2>Requisites:</h2>
<p>1. Download and install/unzip <a href="http://www.apachefriends.org/en/xampp-windows.html">XAMPP</a> for win32 version 1.7.4-VC6.</p>
<p>This bundle comes with severals tools:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
###### ApacheFriends XAMPP (Basispaket) version 1.7.4 ######</p>
<p>  + Apache 2.2.17<br />
  + MySQL 5.5.8 (Community Server)<br />
  + PHP 5.3.5 (VC6 X86 32bit) + PEAR<br />
  + XAMPP Control Version 2.5 from www.nat32.com<br />
  + XAMPP Security<br />
  + SQLite 2.8.15<br />
  + OpenSSL 0.9.8o<br />
  + phpMyAdmin 3.3.9<br />
  + ADOdb 5.11<br />
  + Mercury Mail Transport System v4.62<br />
  + FileZilla FTP Server 0.9.37<br />
  + Webalizer 2.01-10<br />
  + Zend Optimizer 3.3.0<br />
  + Perl 5.10.1<br />
  + Mod_perl 2.0.4<br />
  + Tomcat 7.0.3<br />
 [/sourcecode]</p>
<p><a href="http://xdebug.org">XDebug</a> comes pre-installed in this bundle.</p>
<p>2. Download Eclipse IDE (Helios SR2).</p>
<p>3. Install from Eclipse Marketplace the PHP Development Tools (PDT) plugin (version 3.0.0.x).</p>
<h2>Apache and PHP debugging configuration</h2>
<p>1. Configure XDebug in XAMPP bundle.<br />
Edit <strong>php.ini</strong> and enable XDebug and remote debugging, make sure to uncomment the bellow lines and put to "1" the parameters "<strong>xdebug.remote_autostart</strong>" and "<strong>xdebug.remote_enable</strong>".</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
[eAccelerator]<br />
;zend_extension = &quot;C:\1bpms-demo\xampp-win32-1.7.4-VC6\php\ext\php_eaccelerator.dll&quot;<br />
...</p>
<p>[XDebug]<br />
zend_extension = &quot;C:\1bpms-demo\xampp-win32-1.7.4-VC6\php\ext\php_xdebug.dll&quot;<br />
xdebug.auto_trace = 0<br />
xdebug.collect_includes = 1<br />
xdebug.collect_params = 0<br />
xdebug.collect_return = 0<br />
xdebug.collect_vars = &quot;Off&quot;<br />
xdebug.default_enable = &quot;On&quot;<br />
xdebug.dump.COOKIE = &quot;&quot;<br />
xdebug.dump.FILES = &quot;&quot;<br />
xdebug.dump.GET = &quot;&quot;<br />
xdebug.dump.POST = &quot;&quot;<br />
xdebug.dump.REQUEST = &quot;&quot;<br />
xdebug.dump.SERVER = &quot;&quot;<br />
xdebug.dump.SESSION = &quot;&quot;<br />
xdebug.dump_globals = 1<br />
xdebug.dump_once = 1<br />
xdebug.dump_undefined = 0<br />
xdebug.extended_info = 1<br />
xdebug.file_link_format = &quot;&quot;<br />
xdebug.idekey = &quot;&quot;<br />
xdebug.manual_url = &quot;http://www.php.net&quot;<br />
xdebug.max_nesting_level = 100<br />
xdebug.overload_var_dump = 1<br />
xdebug.profiler_append = 0<br />
xdebug.profiler_enable = 0<br />
xdebug.profiler_enable_trigger = 0<br />
xdebug.profiler_output_dir = &quot;C:\1bpms-demo\xampp-win32-1.7.4-VC6\tmp&quot;<br />
xdebug.profiler_output_name = &quot;xdebug_profile.%R::%u&quot;</p>
<p>; xdebug.remote_autostart<br />
; Type: boolean, Default value: 0<br />
; Normally you need to use a specific HTTP GET/POST variable to start remote debugging (see Remote<br />
; Debugging). When this setting is set to 'On' Xdebug will always attempt to start a remote debugging<br />
; session and try to connect to a client, even if the GET/POST/COOKIE variable was not present.<br />
xdebug.remote_autostart = 1</p>
<p>; xdebug.remote_enable<br />
; Type: boolean, Default value: 0<br />
; This switch controls whether Xdebug should try to contact a debug client which is listening on the<br />
; host and port as set with the settings xdebug.remote_host and xdebug.remote_port. If a connection<br />
; can not be established the script will just continue as if this setting was Off.<br />
xdebug.remote_enable = 1</p>
<p>xdebug.remote_handler = &quot;dbgp&quot;<br />
xdebug.remote_host = &quot;localhost&quot;<br />
xdebug.remote_log = &quot;none&quot;<br />
xdebug.remote_mode = &quot;req&quot;<br />
xdebug.remote_port = 9000<br />
xdebug.show_exception_trace = 0<br />
xdebug.show_local_vars = 0<br />
xdebug.show_mem_delta = 0<br />
xdebug.trace_format = 0<br />
xdebug.trace_options = 0<br />
xdebug.trace_output_dir = &quot;C:\1bpms-demo\xampp-win32-1.7.4-VC6\tmp&quot;<br />
xdebug.trace_output_name = &quot;trace.%c&quot;<br />
xdebug.var_display_max_children = 128<br />
xdebug.var_display_max_data = 512<br />
xdebug.var_display_max_depth = 3<br />
...<br />
[/sourcecode]</p>
<p>Make sure that XDebug dynamic extension is not loaded in <strong>php.ini</strong>.</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
;extension = php_xdebug.dll<br />
[/sourcecode]</p>
<p>Re-start apache and verify that XDebug is loaded.</p>
<p>[caption id="" align="alignnone" width="439" caption="XDebug library loaded in Apache HTTPD"]<img class=" " title="XDebug library loaded in Apache HTTPD" src="{{ site.baseurl }}/assets/phpdebugging-1-xdebugloaded.png" alt="XDebug library loaded in Apache HTTPD" width="439" height="173" />[/caption]</p>
<h2>Eclipse &amp; PDT configuration</h2>
<p>1. In Apache HTTP Server add a root folder as your base web for PHP projects.<br />
For example, my base folder is configured in httpd.conf file and looks like this:</p>
<p>[sourcecode language="xml" gutter="true" wraplines="false"]<br />
Alias /myphpprojects &quot;C:/2workspace&quot;<br />
&lt;Directory &quot;C:/2workspace&quot;&gt;<br />
    AllowOverride none<br />
    Options None<br />
    Order allow,deny<br />
    Allow from all<br />
&lt;/Directory&gt;<br />
[/sourcecode]</p>
<p>2. In Eclipse, create a test php project in "<strong>C:/2workspace</strong>" and select PHP 5.3 runtime when creating. For example, create "<strong>testdebug01</strong>" php project.</p>
<p>[caption id="" align="alignnone" width="322" caption="Creating PHP Project from Eclipse IDE and PDT"]<img class=" " title="Creating PHP Project from Eclipse IDE and PDT" src="{{ site.baseurl }}/assets/phpdebugging-2-eclipsecreateproj.png" alt="Creating PHP Project from Eclipse IDE and PDT" width="322" height="377" />[/caption]</p>
<p>3. Create a <strong>helloworld.php</strong> as you test PHP script in above project, the script looks like this:</p>
<p>[sourcecode language="xml" gutter="true" wraplines="false"]<br />
&lt;?php<br />
$msg = &quot;crazy world&quot;;<br />
echo &quot;&lt;h1&gt;Test PHP Debugging #1 &lt;/h1&gt;&quot;;<br />
echo &quot;&lt;hr&gt;&quot;;<br />
echo &quot;&lt;ol&gt;&quot;;<br />
for ($k = 0; $k &lt; 10; $k++) {<br />
	print(&quot;&lt;li&gt;Hello, $msg ($k)! &lt;br&gt;&quot;);<br />
}<br />
echo &quot;&lt;/ol&gt;&quot;;<br />
?&gt;<br />
[/sourcecode]</p>
<p>4. In Eclipse, go to <strong>Windows &gt; Preferences &gt; PHP &gt; Debug</strong> and make sure XDebug is selected as default PHP Debugger.</p>
<p>[caption id="" align="alignnone" width="358" caption="Configuring PHP Debug in Eclipse IDE"]<img class=" " title="Configuring PHP Debug in Eclipse IDE" src="{{ site.baseurl }}/assets/phpdebugging-3-eclipsephpdebug.png" alt="Configuring PHP Debug in Eclipse IDE" width="358" height="304" />[/caption]</p>
<p>5. Now, you are ready for launching debugging from Eclipse. Firstly, put a breakpoint in <strong>helloworld.php</strong> and then go to left side on Navigator, right click on <strong>helloworld.php</strong> file and select "<strong>Debug Configurations</strong>".<br />
In the next window configure following:</p>
<ul>
<li><strong> Name</strong>: Your debug profile configuration, in this example is "Test debug 01".</li>
<li><strong> Server Debugger</strong>: XDebug</li>
<li><strong> File</strong>: Your php script that trigger debug environment. This file has to a breakpoint. In this example is "/testdebug01/helloworld.php".</li>
<li><strong> Auto Generate</strong>: Unchecked if you want change URL of your php application. In this example is "/myphpprojects/testdebug01/helloworld.php".</li>
</ul>
<p>[caption id="" align="alignnone" width="481" caption="Launching debug from PHP Project in Eclipse IDE"]<img class=" " title="Launching debug from PHP Project in Eclipse IDE" src="{{ site.baseurl }}/assets/phpdebugging-4-debugconf.png" alt="Launching debug from PHP Project in Eclipse IDE" width="481" height="373" />[/caption]</p>
<p>Click in "<strong>Run</strong>" button and if all is OK, Eclipse switchs to Debug perspective where you can debug your PHP application.</p>
<p>[caption id="" align="alignnone" width="449" caption="Debugging PHP Project from Eclipse IDE"]<img class=" " title="Debugging PHP Project from Eclipse IDE" src="{{ site.baseurl }}/assets/phpdebugging-5-debugging.png" alt="Debugging PHP Project from Eclipse IDE" width="449" height="258" />[/caption]</p>
<h2>Conclusions:</h2>
<ul>
<li>With XDebug you can debug remotely from Eclipse and PDT. In this case you have to change localhost for you server-name in <strong>php.ini</strong> file and <strong>Eclipse &gt; Preferences &gt; PHP &gt; PHP Servers</strong>.</li>
<li>If you set "<strong>/</strong>" as web base path instead of "<strong>/myphpprojects</strong>" you could avoid to configure special URL in Auto Generate box (Debug Configurations window). Always you URL will be "<strong>http://localhost/your-php-project-name</strong>".</li>
</ul>
