---
layout: post
title: Content Modeling when developing application in Alfresco ECM
date: 2011-06-22 01:24:23.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- ECM
tags:
- Alfresco
- model
meta:
  _edit_last: '578869'
  _wpas_done_twitter: '1'
author:
  login: rcarhuatocto
  email: roger@intix.info
  display_name: Roger CARHUATOCTO
  first_name: ''
  last_name: ''
permalink: "/2011/06/22/content-modeling-when-developing-application-alfresco-ecm/"
---
<p>When developing applications, you start with a stage of analysis-design that allows modeling the structure of the database that you application will use.<br />
So why not do something similar when developing applications on Alfresco ECM?.</p>
<p>What makes Alfresco ECM a powerful tool is the ability to do content modeling. If you do not that, would not make much sense to use Alfresco ECM and instead should use any file-system such as WebDAV, FTP, NFS, etc.</p>
<p>The content model in Alfresco ECM allows us to identify types of documents, properties and their relationships existing in our organization/business.</p>
<p>This post will explain how to modeling the content that our type of organization/business requires and also explains how to deploy it on an installation of Alfresco ECM.</p>
<h2>I. XML definition files </h2>
<p>Create the following files:</p>
<p><b>1. intix-model-context.xml</b></p>
<p>This is Spring file configuration for the new content model.</p>
<p>[sourcecode language="xml" gutter="true" wraplines="false"]<br />
&lt;?xml version='1.0' encoding='UTF-8'?&gt;<br />
&lt;!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'&gt;<br />
&lt;beans&gt;<br />
	&lt;!-- Registration of new models --&gt;<br />
	&lt;bean id=&quot;intix.dictionaryBootstrap&quot;<br />
		  parent=&quot;dictionaryModelBootstrap&quot;<br />
		  depends-on=&quot;dictionaryBootstrap&quot;&gt;<br />
		&lt;property name=&quot;models&quot;&gt;<br />
			&lt;list&gt;<br />
				&lt;value&gt;alfresco/extension/intixModel.xml&lt;/value&gt;<br />
			&lt;/list&gt;<br />
		&lt;/property&gt;<br />
	&lt;/bean&gt;<br />
&lt;/beans&gt;<br />
[/sourcecode]</p>
<p><b>2. intixModel.xml</b></p>
<p>This xml file contains our custom model.</p>
<p>[sourcecode language="xml" gutter="true" wraplines="false"]<br />
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />
&lt;!-- Definition of new Model --&gt;<br />
&lt;model name=&quot;ix:intixmodel&quot; xmlns=&quot;http://www.alfresco.org/model/dictionary/1.0&quot;&gt;<br />
&lt;!-- Optional meta-data about the model --&gt;<br />
&lt;description&gt;INTIX.info Content Model&lt;/description&gt;<br />
&lt;author&gt;Roger Carhuatocto&lt;/author&gt;<br />
&lt;version&gt;1.0&lt;/version&gt;</p>
<p>&lt;!-- Imports are required to allow references to definitions in other models --&gt;<br />
&lt;imports&gt;<br />
	&lt;import uri=&quot;http://www.alfresco.org/model/dictionary/1.0&quot; prefix=&quot;d&quot; /&gt;<br />
	&lt;import uri=&quot;http://www.alfresco.org/model/content/1.0&quot; prefix=&quot;cm&quot; /&gt;<br />
	&lt;import uri=&quot;http://www.alfresco.org/model/system/1.0&quot; prefix=&quot;sys&quot; /&gt;<br />
&lt;/imports&gt;</p>
<p>&lt;!-- Introduction of new namespaces defined by this model --&gt;<br />
&lt;namespaces&gt;<br />
	&lt;namespace uri=&quot;http://www.intix.info/model/content/1.0&quot; prefix=&quot;ix&quot; /&gt;<br />
&lt;/namespaces&gt;</p>
<p>&lt;constraints&gt;<br />
	&lt;constraint name=&quot;ix:projectList&quot; type=&quot;LIST&quot;&gt;<br />
		&lt;parameter name=&quot;allowedValues&quot;&gt;<br />
			&lt;list&gt;<br />
			&lt;value&gt;Foo Project&lt;/value&gt;<br />
			&lt;value&gt;Bar Project&lt;/value&gt;<br />
			&lt;value&gt;Acme Project&lt;/value&gt;<br />
			&lt;/list&gt;<br />
		&lt;/parameter&gt;<br />
	&lt;/constraint&gt;<br />
&lt;/constraints&gt;</p>
<p>&lt;types&gt;<br />
	&lt;!-- Enterprise-wide generic document type --&gt;<br />
	&lt;type name=&quot;ix:doc&quot;&gt;<br />
		&lt;title&gt;INTIX.info Document&lt;/title&gt;<br />
		&lt;parent&gt;cm:content&lt;/parent&gt;<br />
		&lt;associations&gt;<br />
			&lt;association name=&quot;ix:relatedDocuments&quot;&gt;<br />
			&lt;title&gt;INTIX.info Related Documents&lt;/title&gt;<br />
			&lt;source&gt;<br />
				&lt;mandatory&gt;false&lt;/mandatory&gt;<br />
				&lt;many&gt;true&lt;/many&gt;<br />
			&lt;/source&gt;<br />
			&lt;target&gt;<br />
				&lt;class&gt;ix:doc&lt;/class&gt;<br />
				&lt;mandatory&gt;false&lt;/mandatory&gt;<br />
				&lt;many&gt;true&lt;/many&gt;<br />
			&lt;/target&gt;<br />
			&lt;/association&gt;<br />
		&lt;/associations&gt;<br />
		&lt;mandatory-aspects&gt;<br />
			&lt;aspect&gt;cm:generalclassifiable&lt;/aspect&gt;<br />
		&lt;/mandatory-aspects&gt;<br />
	&lt;/type&gt;</p>
<p>	&lt;type name=&quot;ix:legalDoc&quot;&gt;<br />
		&lt;title&gt;INTIX.info Legal Document&lt;/title&gt;<br />
		&lt;parent&gt;ix:doc&lt;/parent&gt;<br />
	&lt;/type&gt;</p>
<p>	&lt;type name=&quot;ix:fld&quot;&gt;<br />
		&lt;title&gt;INTIX.info Folder Document&lt;/title&gt;<br />
		&lt;parent&gt;cm:folder&lt;/parent&gt;<br />
		&lt;associations&gt;<br />
			&lt;association name=&quot;ix:relatedFolder2Docs&quot;&gt;<br />
			&lt;title&gt;INTIX.info Documents Related to Folder&lt;/title&gt;<br />
			&lt;source&gt;<br />
				&lt;mandatory&gt;false&lt;/mandatory&gt;<br />
				&lt;many&gt;true&lt;/many&gt;<br />
			&lt;/source&gt;<br />
			&lt;target&gt;<br />
				&lt;class&gt;ix:doc&lt;/class&gt;<br />
				&lt;mandatory&gt;false&lt;/mandatory&gt;<br />
				&lt;many&gt;true&lt;/many&gt;<br />
			&lt;/target&gt;<br />
			&lt;/association&gt;<br />
		&lt;/associations&gt;<br />
	&lt;/type&gt;</p>
<p>	&lt;type name=&quot;ix:marketingDoc&quot;&gt;<br />
		&lt;title&gt;INTIX.info Marketing Document&lt;/title&gt;<br />
		&lt;parent&gt;ix:doc&lt;/parent&gt;<br />
		&lt;properties&gt;<br />
			&lt;property name=&quot;ix:project&quot;&gt;<br />
			&lt;type&gt;d:text&lt;/type&gt;<br />
			&lt;multiple&gt;true&lt;/multiple&gt;<br />
			&lt;constraints&gt;<br />
				&lt;constraint ref=&quot;ix:projectList&quot; /&gt;<br />
			&lt;/constraints&gt;<br />
			&lt;/property&gt;<br />
		&lt;/properties&gt;<br />
	&lt;/type&gt;<br />
&lt;/types&gt;<br />
&lt;/model&gt;<br />
[/sourcecode]</p>
<p><b>3. web-client-config-custom.xml</b></p>
<p>This configuration file enables Alfresco Explore/Web Client to load the new content model in the Alfresco UI.</p>
<p>[sourcecode language="xml" gutter="true" wraplines="false"]<br />
&lt;alfresco-config&gt;<br />
	&lt;!-- show related documents association on doc property sheet --&gt;<br />
	&lt;config evaluator=&quot;node-type&quot; condition=&quot;ix:doc&quot;&gt;<br />
		&lt;property-sheet&gt;<br />
			&lt;show-association name=&quot;ix:relatedDocuments&quot; /&gt;<br />
		&lt;/property-sheet&gt;<br />
	&lt;/config&gt;<br />
	&lt;!-- show related documents association on FOLDER property sheet --&gt;<br />
	&lt;config evaluator=&quot;node-type&quot; condition=&quot;ix:fld&quot;&gt;<br />
		&lt;property-sheet&gt;<br />
			&lt;show-association name=&quot;ix:relatedFolder2Docs&quot; /&gt;<br />
		&lt;/property-sheet&gt;<br />
	&lt;/config&gt;<br />
	&lt;!-- show PROJECT on marketingDoc property sheet --&gt;<br />
	&lt;config evaluator=&quot;node-type&quot; condition=&quot;ix:marketingDoc&quot;&gt;<br />
		&lt;property-sheet&gt;<br />
			&lt;show-property name=&quot;ix:project&quot; display-label-id=&quot;project&quot; /&gt;<br />
		&lt;/property-sheet&gt;<br />
	&lt;/config&gt;<br />
	&lt;!-- show related documents association on DOC property sheet --&gt;<br />
	&lt;config evaluator=&quot;node-type&quot; condition=&quot;ix:doc&quot;&gt;<br />
		&lt;property-sheet&gt;<br />
			&lt;show-association name=&quot;ix:relatedDocuments&quot; /&gt;<br />
		&lt;/property-sheet&gt;<br />
	&lt;/config&gt;<br />
	&lt;!-- add NEW CONTENT types to add content list wizard --&gt;<br />
	&lt;config evaluator=&quot;string-compare&quot; condition=&quot;Content Wizards&quot;&gt;<br />
		&lt;content-types&gt;<br />
			&lt;type name=&quot;ix:doc&quot; /&gt;<br />
			&lt;type name=&quot;ix:legalDoc&quot; /&gt;<br />
			&lt;type name=&quot;ix:marketingDoc&quot; /&gt;<br />
		&lt;/content-types&gt;<br />
	&lt;/config&gt;<br />
	&lt;!-- add new FOLDER types to add content list wizard --&gt;<br />
	&lt;config evaluator=&quot;string-compare&quot; condition=&quot;Space Wizards&quot;&gt;<br />
		&lt;folder-types&gt;<br />
			&lt;type name=&quot;ix:fld&quot; /&gt;<br />
		&lt;/folder-types&gt;<br />
	&lt;/config&gt;<br />
	&lt;config evaluator=&quot;string-compare&quot; condition=&quot;Action Wizards&quot;&gt;<br />
		&lt;!-- The list of types shown in the is-subtype condition --&gt;<br />
		&lt;subtypes&gt;<br />
			&lt;type name=&quot;ix:doc&quot; /&gt;<br />
			&lt;type name=&quot;ix:legalDoc&quot; /&gt;<br />
			&lt;type name=&quot;ix:marketingDoc&quot; /&gt;<br />
		&lt;/subtypes&gt;<br />
		&lt;!-- The list of content and/or folder types shown in the specialise-type action --&gt;<br />
		&lt;specialise-types&gt;<br />
			&lt;type name=&quot;ix:doc&quot; /&gt;<br />
			&lt;type name=&quot;ix:legalDoc&quot; /&gt;<br />
			&lt;type name=&quot;ix:marketingDoc&quot; /&gt;<br />
			&lt;type name=&quot;ix:fld&quot; /&gt;<br />
		&lt;/specialise-types&gt;<br />
	&lt;/config&gt;<br />
	&lt;config evaluator=&quot;string-compare&quot; condition=&quot;Advanced Search&quot;&gt;<br />
		&lt;advanced-search&gt;<br />
			&lt;content-types&gt;<br />
			&lt;type name=&quot;ix:doc&quot; /&gt;<br />
			&lt;type name=&quot;ix:legalDoc&quot; /&gt;<br />
			&lt;type name=&quot;ix:marketingDoc&quot; /&gt;<br />
			&lt;type name=&quot;ix:fld&quot; /&gt;<br />
			&lt;/content-types&gt;<br />
		&lt;/advanced-search&gt;<br />
	&lt;/config&gt;<br />
&lt;/alfresco-config&gt;<br />
[/sourcecode]</p>
<h2>II. Deploy the content model </h2>
<p>1. Stop Alfresco.</p>
<p>2. Copy <b>intix-model-context.xml</b> to <b>${ALFRESCO_HOME}\tomcat\shared\classes\alfresco\extension</b></p>
<p>3. Copy <b>intixModel.xml</b> to <b>${ALFRESCO_HOME}\tomcat\shared\classes\alfresco\extension</b></p>
<p>4. At this point, you will still not actually can not "see" the new custom model on the Alfresco UI (Alfresco Explorer/Web Client).<br />
For that, you will need to set up the property dialogs for each of the content types.</p>
<p>Then, copy <b>web-client-config-custom.xml</b> to <b>${ALFRESCO_HOME}\tomcat\shared\classes\alfresco\extension</b></p>
<p>5. Start Alfresco.</p>
<p>6. Verify successfully deployment of new content model by browsing on Alfresco Explorer/Web Client.</p>
<p>[caption id="" align="alignnone" width="432" caption="Step 1 - Upload a new type of content"]<img alt="Step 1 - Upload a new type of content" src="{{ site.baseurl }}/assets/01_upload_content.png" title="Step 1 - Upload a new type of content" width="432" height="458" />[/caption]</p>
<p>[caption id="" align="alignnone" width="350" caption="Step 2 - Modify properties (metadata) of new uploaded content"]<img alt="Step 2 - Modify properties (metadata) of new uploaded content" src="{{ site.baseurl }}/assets/02_upload_content.png" title="Step 2 - Modify properties (metadata) of new uploaded content" width="350" height="439" />[/caption]</p>
<p>[caption id="" align="alignnone" width="463" caption="Step 3 - Modify properties of new type content"]<img alt="Step 3 - Modify properties of new type content" src="{{ site.baseurl }}/assets/03_upload_content.png" title="Step 3 - Modify properties of new type content" width="463" height="517" />[/caption]</p>
<p> 7. End.</p>
