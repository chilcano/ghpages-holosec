---
layout: post
title: Install Mirth Connect 2.1 on Ubuntu 10.10 with MySQL Server
date: 2011-05-09 18:02:49.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- EIP
- ESB
- Health Care
- Open Source
- SOA
tags:
- HL7
- Mirth Connect
- Mule
meta:
  _edit_last: '578869'
  _wpas_done_twitter: '1'
  tagazine-media: a:7:{s:7:"primary";s:86:"http://dl.dropbox.com/u/2961879/blog20110509_mirth_connect/MirthConnectAdminLogin2.png";s:6:"images";a:3:{s:84:"http://dl.dropbox.com/u/2961879/blog20110509_mirth_connect/mirthconnect_logowide.png";a:6:{s:8:"file_url";s:84:"http://dl.dropbox.com/u/2961879/blog20110509_mirth_connect/mirthconnect_logowide.png";s:5:"width";s:3:"250";s:6:"height";s:2:"50";s:4:"type";s:5:"image";s:4:"area";s:5:"12500";s:9:"file_path";s:0:"";}s:88:"http://dl.dropbox.com/u/2961879/blog20110509_mirth_connect/mirthconnect_architecture.png";a:6:{s:8:"file_url";s:88:"http://dl.dropbox.com/u/2961879/blog20110509_mirth_connect/mirthconnect_architecture.png";s:5:"width";s:3:"491";s:6:"height";s:3:"368";s:4:"type";s:5:"image";s:4:"area";s:6:"180688";s:9:"file_path";s:0:"";}s:86:"http://dl.dropbox.com/u/2961879/blog20110509_mirth_connect/MirthConnectAdminLogin2.png";a:6:{s:8:"file_url";s:86:"http://dl.dropbox.com/u/2961879/blog20110509_mirth_connect/MirthConnectAdminLogin2.png";s:5:"width";s:3:"789";s:6:"height";s:3:"520";s:4:"type";s:5:"image";s:4:"area";s:6:"410280";s:9:"file_path";s:0:"";}}s:6:"videos";a:0:{}s:11:"image_count";s:1:"3";s:6:"author";s:6:"578869";s:7:"blog_id";s:7:"2005905";s:9:"mod_stamp";s:19:"2011-05-09
    17:02:49";}
  twitter_cards_summary_img_size: a:6:{i:0;i:250;i:1;i:50;i:2;i:3;i:3;s:23:"width="250"
    height="50"";s:4:"bits";i:8;s:4:"mime";s:9:"image/png";}
  _wpcom_is_markdown: '1'
author:
  login: rcarhuatocto
  email: roger@intix.info
  display_name: Roger Carhuatocto
  first_name: ''
  last_name: ''
permalink: "/2011/05/09/install-mirth-connect-ubuntu-mysql/"
---
<p><img class="alignright" title="Mirth Connect, SOA, ESB, HL7" src="{{ site.baseurl }}/assets/mirthconnect_logowide.png" alt="Mirth Connect, SOA, ESB, HL7" width="250" height="50" /></p>
<p>Mirth Connect is a Service Oriented Integration Platform based on Mule ESB. Mirth Connect is specifically designed for HL7 (Health Level Seven - set of standards for the health messages exchanging) message exchange.</p>
<p>Mirth Connect as a SOA Platform provides tools for developing, testing, deploying, and monitoring interfaces (channel for the exchange of HL7 messages).</p>
<p>[caption id="" align="alignnone" width="491" caption="Mirth Connect Architecture"]<img title="Mirth Connect Architecture" src="{{ site.baseurl }}/assets/mirthconnect_architecture.png" alt="Mirth Connect Architecture" width="491" height="368" />[/caption]</p>
<p>Mirth Connect is a project Open Source with Mozilla Public License 1.1 (MPL 1.1) and can be downloaded from here h<a href="http://www.mirthcorp.com/community/downloads">ttp://www.mirthcorp.com/community/downloads</a></p>
<p>Well, we will explain how to install on Ubuntu and how to switch Derby database server to MySQL server.</p>
<h2>1. Install Java</h2>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:~$ sudo apt-get install openjdk-6-jdk<br />
[/sourcecode]</p>
<h2>2. Install Mirth Connect</h2>
<p>1. Download and setup execution permissions:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:~$ chmod +x mirthconnect-2.1.0.5389.b671-unix.sh<br />
amawta@yachaywasi:~$ sudo ./mirthconnect-2.1.0.5389.b671-unix.sh<br />
[/sourcecode]</p>
<p>2. Verify Mirth Connect installation:</p>
<p>Go to http://localhost:8080 where you can access to Mirth Connect Server via Java App Admin console.<br />
The administrator user and password are admin and admin, change it!.<br />
If you can not connect to server, then start it.</p>
<p>3. Start Mirth Connect from Manager (mcmanager), Server (mcserver) or as Service (mcservice).</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:/opt/mirthconnect$ sudo ./mcservice start<br />
[/sourcecode]</p>
<p>verify again Mirth Connect is running.</p>
<h2>3. Switch from Derby database to MySQL server</h2>
<p>1. Install MySQL:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:~$ sudo apt-get install mysql-server mysql-client<br />
[/sourcecode]</p>
<p>and verify if MySQL is running:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:~$ netstat -tulpan<br />
[/sourcecode]</p>
<p>or starting:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:~$ sudo service mysql start<br />
[/sourcecode]</p>
<p>after, connect to MySQL:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:~$ mysql -u root -p<br />
[/sourcecode]</p>
<p>2. Create an empty database and an user for Mirth Connect:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
CREATE DATABASE mirthdb DEFAULT CHARACTER SET utf8;<br />
GRANT ALL ON mirthdb.* TO mirthuser@'localhost' IDENTIFIED BY 'demodemo' WITH GRANT OPTION;<br />
GRANT ALL ON mirthdb.* TO mirthuser@'%' IDENTIFIED BY 'demodemo' WITH GRANT OPTION;<br />
[/sourcecode]</p>
<p>If you want to connect from other PC different to localhost, then edit /etc/mysql/my.cnf<br />
and comment the line "bind-address = 127.0.0.1", after re-start MySQL.</p>
<p>3. Stop Mirth Connect:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:/opt/mirthconnect$ sudo ./mcservice stop<br />
[/sourcecode]</p>
<p>4. Edit the <code>%MIRTH_HOME%/conf/mirth.properties</code> file and set the “database” property to the database of your choice, for example “mysql” (no quotes).<br />
Also, set the “database.url”, “database.username”, and “database.password” properties. In this case are:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
database = mysql<br />
database.url =jdbc:mysql://localhost:3306/mirthdb<br />
database.username = mirthuser<br />
database.password = demodemo<br />
[/sourcecode]</p>
<p>6. Restart the Mirth Connect Server and check logs.<br />
Mirth Connect server will create a new database schema:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:/opt/mirthconnect$ sudo ./mcserver<br />
INFO  2011-05-09 16:52:13,769 [Thread-1] com.mirth.connect.server.Mirth: Mirth Connect 2.1.0.5389 (Built on April 25, 2011) server successfully started.<br />
INFO  2011-05-09 16:52:13,771 [Thread-1] com.mirth.connect.server.Mirth: This product was developed by Mirth Corporation (http://www.mirthcorp.com) and its contributors (c)2005-2011.<br />
INFO  2011-05-09 16:52:13,772 [Thread-1] com.mirth.connect.server.Mirth: Running OpenJDK Server VM 1.6.0_20 on Linux (2.6.35-22-generic, i386), mysql, with charset UTF-8.<br />
[/sourcecode]</p>
<p>To verify new schema do the following:</p>
<p>[sourcecode language="text" gutter="true" wraplines="false"]<br />
amawta@yachaywasi:~$ mysqlshow -u mirthuser -p mirthdb<br />
Enter password:<br />
Database: mirthdb<br />
+--------------------+<br />
|       Tables       |<br />
+--------------------+<br />
| ALERT              |<br />
| ALERT_EMAIL        |<br />
| ATTACHMENT         |<br />
| CHANNEL            |<br />
| CHANNEL_ALERT      |<br />
| CHANNEL_STATISTICS |<br />
| CODE_TEMPLATE      |<br />
| CONFIGURATION      |<br />
| ENCRYPTION_KEY     |<br />
| EVENT              |<br />
| MESSAGE            |<br />
| PERSON             |<br />
| SCHEMA_INFO        |<br />
| SCRIPT             |<br />
| TEMPLATE           |<br />
+--------------------+<br />
[/sourcecode]</p>
<p>7. Now you could connect to Mirth, go to http://localhost:8080, start Mirth Connect Administrator, the default user and password will be admin/admin, change it again.</p>
<p>[caption id="" align="alignnone" width="473" caption="Mirth Connect Administration"]<img class=" " title="Mirth Connect Administration" src="{{ site.baseurl }}/assets/MirthConnectAdminLogin2.png" alt="Mirth Connect Administration" width="473" height="312" />[/caption]</p>
<p>Regards.</p>
